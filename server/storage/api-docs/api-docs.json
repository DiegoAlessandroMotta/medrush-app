{
    "openapi": "3.0.0",
    "info": {
        "title": "MedRushApp API",
        "description": "API REST para el sistema de distribución de medicinas MedRush",
        "termsOfService": "https://example.com/terms",
        "contact": {
            "name": "API Support",
            "url": "https://example.com/support",
            "email": "support@example.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:4000",
            "description": "Servidor Local"
        },
        {
            "url": "https://api.medrush.com",
            "description": "Servidor de Producción"
        }
    ],
    "paths": {
        "/api/directions": {
            "get": {
                "tags": [
                    "Maps",
                    "Directions"
                ],
                "summary": "Obtener direcciones con puntos intermedios",
                "description": "Calcula la ruta optimizada entre un origen y destino, pasando por múltiples waypoints (puntos intermedios). Utiliza Google Maps Directions API internamente.",
                "operationId": "directionsGetWithWaypoints",
                "parameters": [
                    {
                        "name": "origen",
                        "in": "query",
                        "description": "Ubicación de origen en formato 'latitude,longitude'",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "4.7110,-74.0087"
                        }
                    },
                    {
                        "name": "destino",
                        "in": "query",
                        "description": "Ubicación de destino en formato 'latitude,longitude'",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "4.7169,-74.0072"
                        }
                    },
                    {
                        "name": "waypoints",
                        "in": "query",
                        "description": "Puntos intermedios separados por '|', cada uno en formato 'latitude,longitude'",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "4.7120,-74.0080|4.7140,-74.0075"
                        }
                    },
                    {
                        "name": "optimize_waypoints",
                        "in": "query",
                        "description": "Si es true, optimiza el orden de los waypoints para distancia mínima",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Direcciones obtenidas exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Directions obtenido exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "encoded_polyline": {
                                                    "description": "Polilínea codificada de la ruta",
                                                    "type": "string",
                                                    "example": "_p~iF~ps|U_ulLnnqC_mqNvxq`@"
                                                },
                                                "legs": {
                                                    "description": "Array de tramos de la ruta",
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "distance_text": {
                                                                "type": "string",
                                                                "example": "5.2 km"
                                                            },
                                                            "duration_text": {
                                                                "type": "string",
                                                                "example": "12 mins"
                                                            },
                                                            "distance_meters": {
                                                                "type": "integer",
                                                                "example": 5200
                                                            },
                                                            "duration_seconds": {
                                                                "type": "integer",
                                                                "example": 720
                                                            },
                                                            "cumulative_distance_meters": {
                                                                "type": "integer",
                                                                "example": 5200
                                                            },
                                                            "cumulative_duration_seconds": {
                                                                "type": "integer",
                                                                "example": 720
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                },
                                                "total_distance_meters": {
                                                    "type": "integer",
                                                    "example": 5200
                                                },
                                                "total_duration_seconds": {
                                                    "type": "integer",
                                                    "example": 720
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Parámetros inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Servicio de mapas no disponible",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/routes": {
            "get": {
                "tags": [
                    "Maps",
                    "Directions"
                ],
                "summary": "Obtener información detallada de ruta",
                "description": "Obtiene información detallada sobre una ruta entre origen y destino, incluyendo distancia y duración total. Versión simplificada sin waypoints.",
                "operationId": "directionsGetRouteInfo",
                "parameters": [
                    {
                        "name": "origen",
                        "in": "query",
                        "description": "Ubicación de origen en formato 'latitude,longitude'",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "4.7110,-74.0087"
                        }
                    },
                    {
                        "name": "destino",
                        "in": "query",
                        "description": "Ubicación de destino en formato 'latitude,longitude'",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "4.7169,-74.0072"
                        }
                    },
                    {
                        "name": "waypoints",
                        "in": "query",
                        "description": "Puntos intermedios separados por '|', cada uno en formato 'latitude,longitude'",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "4.7120,-74.0080|4.7140,-74.0075"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Información de ruta obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Información de ruta obtenida exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "legs": {
                                                    "description": "Array de tramos de la ruta",
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "distance_text": {
                                                                "type": "string",
                                                                "example": "5.2 km"
                                                            },
                                                            "duration_text": {
                                                                "type": "string",
                                                                "example": "12 mins"
                                                            },
                                                            "distance_meters": {
                                                                "type": "integer",
                                                                "example": 5200
                                                            },
                                                            "duration_seconds": {
                                                                "type": "integer",
                                                                "example": 720
                                                            },
                                                            "cumulative_distance_meters": {
                                                                "type": "integer",
                                                                "example": 5200
                                                            },
                                                            "cumulative_duration_seconds": {
                                                                "type": "integer",
                                                                "example": 720
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                },
                                                "total_distance_meters": {
                                                    "type": "integer",
                                                    "example": 5200
                                                },
                                                "total_duration_seconds": {
                                                    "type": "integer",
                                                    "example": 720
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Parámetros inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Servicio de mapas no disponible",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/geocoding/reverse": {
            "post": {
                "tags": [
                    "Maps",
                    "Geocoding"
                ],
                "summary": "Geocodificación inversa - Obtener dirección desde coordenadas",
                "description": "Convierte coordenadas geográficas (latitud, longitud) a dirección legible. Utiliza Google Maps Reverse Geocoding API para obtener componentes de dirección (línea 1, ciudad, estado, código postal, país).",
                "operationId": "geocodingReverse",
                "requestBody": {
                    "description": "Coordenadas a geocodificar",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "location"
                                ],
                                "properties": {
                                    "location": {
                                        "required": [
                                            "latitude",
                                            "longitude"
                                        ],
                                        "properties": {
                                            "latitude": {
                                                "description": "Latitud de la ubicación",
                                                "type": "number",
                                                "format": "float",
                                                "example": 4.711
                                            },
                                            "longitude": {
                                                "description": "Longitud de la ubicación",
                                                "type": "number",
                                                "format": "float",
                                                "example": -74.0087
                                            }
                                        },
                                        "type": "object"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Geocodificación realizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Geocodificación exitosa"
                                        },
                                        "data": {
                                            "properties": {
                                                "address_line_1": {
                                                    "description": "Primera línea de la dirección",
                                                    "type": "string",
                                                    "example": "Carrera 7 #72-41"
                                                },
                                                "city": {
                                                    "description": "Ciudad",
                                                    "type": "string",
                                                    "example": "Bogotá"
                                                },
                                                "state": {
                                                    "description": "Departamento o estado",
                                                    "type": "string",
                                                    "example": "Bogotá D.C."
                                                },
                                                "postal_code": {
                                                    "description": "Código postal",
                                                    "type": "string",
                                                    "example": "110221"
                                                },
                                                "country": {
                                                    "description": "País",
                                                    "type": "string",
                                                    "example": "Colombia"
                                                },
                                                "formatted_address": {
                                                    "description": "Dirección formateada completa",
                                                    "type": "string",
                                                    "example": "Carrera 7 #72-41, Bogotá, Bogotá D.C., 110221, Colombia"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Coordenadas inválidas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor - Servicio de geocodificación no disponible",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/auth/login": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Inicio de sesión",
                "description": "Autentica un usuario con email y contraseña. Retorna un token de acceso (Sanctum) que debe usarse en las peticiones posteriores.",
                "operationId": "authLogin",
                "requestBody": {
                    "description": "Credenciales del usuario",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password",
                                    "device_name"
                                ],
                                "properties": {
                                    "email": {
                                        "description": "Email del usuario",
                                        "type": "string",
                                        "format": "email",
                                        "example": "admin@example.com"
                                    },
                                    "password": {
                                        "description": "Contraseña del usuario",
                                        "type": "string",
                                        "format": "password",
                                        "example": "password"
                                    },
                                    "device_name": {
                                        "description": "Nombre del dispositivo (móvil, web, etc)",
                                        "type": "string",
                                        "example": "iPhone 15 Pro"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Inicio de sesión exitoso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Inicio de sesión exitoso."
                                        },
                                        "data": {
                                            "properties": {
                                                "user": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "string",
                                                            "format": "uuid",
                                                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Admin User"
                                                        },
                                                        "email": {
                                                            "type": "string",
                                                            "format": "email",
                                                            "example": "admin@example.com"
                                                        },
                                                        "avatar": {
                                                            "description": "URL firmada de la foto de perfil",
                                                            "type": "string",
                                                            "format": "url",
                                                            "example": "https://example.com/storage/signed-url"
                                                        },
                                                        "is_active": {
                                                            "type": "boolean",
                                                            "example": true
                                                        },
                                                        "created_at": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2025-11-22T10:30:00Z"
                                                        },
                                                        "updated_at": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2025-11-22T10:30:00Z"
                                                        },
                                                        "roles": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            },
                                                            "example": [
                                                                "admin"
                                                            ]
                                                        },
                                                        "perfil_repartidor": {
                                                            "description": "Perfil del repartidor si el usuario tiene ese rol",
                                                            "type": "object",
                                                            "nullable": true
                                                        },
                                                        "perfil_farmacia": {
                                                            "description": "Perfil de la farmacia si el usuario tiene ese rol",
                                                            "type": "object",
                                                            "nullable": true
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "access_token": {
                                                    "description": "Token de acceso Sanctum a usar en el header Authorization",
                                                    "type": "string",
                                                    "example": "1|abcd1234efgh5678ijkl9012mnop3456qrst7890uvwx"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Email, contraseña inválidos o cuenta desactivada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "fail"
                                            ],
                                            "example": "fail"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Los datos proporcionados no son válidos."
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "string",
                                                    "example": "VALIDATION_ERROR"
                                                },
                                                "errors": {
                                                    "properties": {
                                                        "email": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            },
                                                            "example": [
                                                                "Las credenciales proporcionadas son incorrectas. (Email/Contraseña)",
                                                                "Tu cuenta está desactivada. Contacta al administrador."
                                                            ]
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/me": {
            "get": {
                "tags": [
                    "Auth"
                ],
                "summary": "Obtener información del usuario autenticado",
                "description": "Retorna la información completa del usuario actualmente autenticado.",
                "operationId": "authMe",
                "responses": {
                    "200": {
                        "description": "Información del usuario obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Información del usuario autenticado."
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "example": "Admin User"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "admin@example.com"
                                                },
                                                "avatar": {
                                                    "description": "URL firmada de la foto de perfil",
                                                    "type": "string",
                                                    "format": "url",
                                                    "example": "https://example.com/storage/signed-url"
                                                },
                                                "is_active": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-22T10:30:00Z"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-22T10:30:00Z"
                                                },
                                                "roles": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "example": [
                                                        "admin"
                                                    ]
                                                },
                                                "perfil_repartidor": {
                                                    "description": "Perfil del repartidor si el usuario tiene ese rol",
                                                    "type": "object",
                                                    "nullable": true
                                                },
                                                "perfil_farmacia": {
                                                    "description": "Perfil de la farmacia si el usuario tiene ese rol",
                                                    "type": "object",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/auth/logout": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Cerrar sesión en el dispositivo actual",
                "description": "Revoca el token del dispositivo actual. El usuario seguirá autenticado en otros dispositivos.",
                "operationId": "authLogout",
                "responses": {
                    "204": {
                        "description": "Sesión cerrada exitosamente"
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/auth/logout-all": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Cerrar sesión en todos los dispositivos",
                "description": "Revoca todos los tokens del usuario. El usuario quedará completamente desautenticado en todos los dispositivos.",
                "operationId": "authLogoutAll",
                "responses": {
                    "204": {
                        "description": "Sesión cerrada en todos los dispositivos"
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/auth/tokens": {
            "get": {
                "tags": [
                    "Auth"
                ],
                "summary": "Listar todas las sesiones activas",
                "description": "Retorna una lista de todos los tokens (sesiones activas) del usuario autenticado, incluyendo en cuál dispositivo fue usado por última vez.",
                "operationId": "authListTokens",
                "responses": {
                    "200": {
                        "description": "Lista de sesiones obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Sesiones activas obtenidas exitosamente."
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "name": {
                                                        "description": "Nombre del dispositivo",
                                                        "type": "string",
                                                        "example": "iPhone 15 Pro"
                                                    },
                                                    "last_used_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-22T14:30:00Z",
                                                        "nullable": true
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-22T10:30:00Z"
                                                    },
                                                    "is_current": {
                                                        "description": "Indica si es el token/sesión actual",
                                                        "type": "boolean",
                                                        "example": true
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/auth/tokens/{tokenId}": {
            "delete": {
                "tags": [
                    "Auth"
                ],
                "summary": "Revocar una sesión específica",
                "description": "Revoca un token específico (sesión) del usuario. No puedes revocar el token que estás usando actualmente.",
                "operationId": "authRevokeToken",
                "parameters": [
                    {
                        "name": "tokenId",
                        "in": "path",
                        "description": "ID del token a revocar",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Sesión revocada exitosamente"
                    },
                    "400": {
                        "description": "No puedes revocar el token que estás usando actualmente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BadRequestResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Token no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/downloads/csv-template/{lang}/{templateKey}/url": {
            "get": {
                "tags": [
                    "Downloads"
                ],
                "summary": "Obtener URL firmada para descargar plantilla CSV",
                "description": "Genera una URL firmada y temporal (válida 15 minutos) para descargar una plantilla CSV en el idioma especificado. Útil para importación de datos masivos.",
                "operationId": "downloadGetSignedCsvTemplateUrl",
                "parameters": [
                    {
                        "name": "lang",
                        "in": "path",
                        "description": "Código de idioma (ej: es, en)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "es"
                        }
                    },
                    {
                        "name": "templateKey",
                        "in": "path",
                        "description": "Identificador de la plantilla (ej: pedidos, farmacias, repartidores)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "pedidos"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "URL firmada generada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "URL firmada generada exitosamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "signed_url": {
                                                    "description": "URL temporal firmada para descargar",
                                                    "type": "string",
                                                    "format": "url",
                                                    "example": "https://api.example.com/downloads/csv-template/es/pedidos?signature=..."
                                                },
                                                "expires_at": {
                                                    "description": "Fecha/hora de expiración de la URL",
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-22T11:00:00Z"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Plantilla CSV no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/downloads/csv-template/{lang}/{templateKey}": {
            "get": {
                "tags": [
                    "Downloads"
                ],
                "summary": "Descargar plantilla CSV",
                "description": "Descarga una plantilla CSV para importación de datos. Esta ruta debe ser accedida con la URL firmada generada por el endpoint anterior.",
                "operationId": "downloadCsvTemplate",
                "parameters": [
                    {
                        "name": "lang",
                        "in": "path",
                        "description": "Código de idioma",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "es"
                        }
                    },
                    {
                        "name": "templateKey",
                        "in": "path",
                        "description": "Identificador de la plantilla",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "pedidos"
                        }
                    },
                    {
                        "name": "signature",
                        "in": "query",
                        "description": "Firma de URL (requerida si la ruta lo exige)",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Archivo CSV descargado exitosamente",
                        "content": {
                            "text/csv": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Plantilla no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/downloads/app": {
            "get": {
                "tags": [
                    "Downloads"
                ],
                "summary": "Descargar aplicación MedRush (APK)",
                "description": "Descarga el archivo APK de la aplicación MedRush para instalar en dispositivos Android.",
                "operationId": "downloadMedrushApp",
                "responses": {
                    "200": {
                        "description": "Archivo APK descargado exitosamente",
                        "content": {
                            "application/vnd.android.package-archive": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Archivo de aplicación no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/pedidos/{pedido}/eventos": {
            "get": {
                "tags": [
                    "Pedidos",
                    "Eventos"
                ],
                "summary": "Obtener eventos de un pedido",
                "description": "Obtiene el historial completo de eventos asociados a un pedido específico, ordenados por fecha de creación descendente. Los eventos registran cambios de estado, asignaciones, entregas y otras acciones importantes del pedido.",
                "operationId": "eventosPedidoIndex",
                "parameters": [
                    {
                        "name": "pedido",
                        "in": "path",
                        "description": "UUID del pedido",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Eventos del pedido obtenidos exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando los eventos del pedido"
                                        },
                                        "data": {
                                            "description": "Array de eventos del pedido",
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "description": "ID único del evento",
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "pedido_id": {
                                                        "description": "UUID del pedido al que pertenece el evento",
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                                    },
                                                    "user_id": {
                                                        "description": "UUID del usuario que causó el evento (nullable)",
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "550e8400-e29b-41d4-a716-446655440001",
                                                        "nullable": true
                                                    },
                                                    "tipo_evento": {
                                                        "description": "Tipo de evento (Estado del pedido)",
                                                        "type": "string",
                                                        "enum": [
                                                            "pedido_creado",
                                                            "pedido_asignado",
                                                            "pedido_reasignado",
                                                            "pedido_asignacion_retirada",
                                                            "pedido_recogido",
                                                            "pedido_en_ruta",
                                                            "pedido_entregado",
                                                            "pedido_entrega_fallida",
                                                            "pedido_cancelado",
                                                            "pedido_asignacion_automatica_fallida"
                                                        ],
                                                        "example": "pedido_asignado"
                                                    },
                                                    "descripcion": {
                                                        "description": "Descripción adicional del evento",
                                                        "type": "string",
                                                        "example": "Pedido asignado a repartidor XYZ",
                                                        "nullable": true
                                                    },
                                                    "metadata": {
                                                        "description": "Datos adicionales asociados al evento (estructura variable según el tipo)",
                                                        "type": "object",
                                                        "example": {
                                                            "repartidor_id": "123",
                                                            "razon": "disponibilidad"
                                                        },
                                                        "nullable": true
                                                    },
                                                    "ubicacion": {
                                                        "description": "Ubicación geográfica del evento (punto GIS)",
                                                        "properties": {
                                                            "type": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "Point"
                                                                ],
                                                                "example": "Point"
                                                            },
                                                            "coordinates": {
                                                                "description": "[longitude, latitude]",
                                                                "type": "array",
                                                                "items": {
                                                                    "type": "number"
                                                                },
                                                                "example": [
                                                                    -74.0087,
                                                                    4.711
                                                                ]
                                                            }
                                                        },
                                                        "type": "object",
                                                        "nullable": true
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-22T15:30:00.000000Z"
                                                    },
                                                    "updated_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-22T15:30:00.000000Z"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para ver este pedido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ForbiddenResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Pedido no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/farmacias": {
            "get": {
                "tags": [
                    "Entities",
                    "Farmacias"
                ],
                "summary": "Listar farmacias",
                "description": "Obtiene una lista paginada de farmacias. Soporta filtrado por ciudad, estado/región, código postal, país, cadena, estado de operación y rango de fechas. También permite búsqueda por nombre, razón social, RUC/EIN y dirección.",
                "operationId": "farmaciasIndex",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página (por defecto: 1)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Cantidad de registros por página (por defecto: 15)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "order_by",
                        "in": "query",
                        "description": "Campo para ordenar",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "created_at",
                                "updated_at",
                                "nombre",
                                "razon_social",
                                "ciudad",
                                "estado_region",
                                "cadena",
                                "estado"
                            ],
                            "example": "nombre"
                        }
                    },
                    {
                        "name": "order_direction",
                        "in": "query",
                        "description": "Dirección de ordenamiento",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "asc"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Búsqueda por nombre, razón social, RUC/EIN, dirección, ciudad, estado/región o contacto",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Farmacia Central"
                        }
                    },
                    {
                        "name": "ciudad",
                        "in": "query",
                        "description": "Filtrar por ciudad",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Lima"
                        }
                    },
                    {
                        "name": "estado_region",
                        "in": "query",
                        "description": "Filtrar por estado o región",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Lima"
                        }
                    },
                    {
                        "name": "codigo_postal",
                        "in": "query",
                        "description": "Filtrar por códigos postales (valores separados por coma)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "15001,15002"
                        }
                    },
                    {
                        "name": "codigo_iso_pais",
                        "in": "query",
                        "description": "Filtrar por código ISO del país (valores separados por coma)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "PE,CO"
                        }
                    },
                    {
                        "name": "cadena",
                        "in": "query",
                        "description": "Filtrar por nombre de cadena farmacéutica",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Farmacia del Doctor"
                        }
                    },
                    {
                        "name": "delivery_24h",
                        "in": "query",
                        "description": "Filtrar por disponibilidad de delivery 24 horas",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "estado",
                        "in": "query",
                        "description": "Filtrar por estado de operación (valores separados por coma)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "activa,inactiva"
                        }
                    },
                    {
                        "name": "fecha_desde",
                        "in": "query",
                        "description": "Filtrar por fecha de creación desde",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2024-01-01"
                        }
                    },
                    {
                        "name": "fecha_hasta",
                        "in": "query",
                        "description": "Filtrar por fecha de creación hasta",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2024-12-31"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de farmacias obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando lista de farmacias."
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "nombre": {
                                                        "type": "string"
                                                    },
                                                    "razon_social": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "ruc_ein": {
                                                        "type": "string"
                                                    },
                                                    "direccion_linea_1": {
                                                        "type": "string"
                                                    },
                                                    "direccion_linea_2": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "ciudad": {
                                                        "type": "string"
                                                    },
                                                    "estado_region": {
                                                        "type": "string"
                                                    },
                                                    "codigo_postal": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "codigo_iso_pais": {
                                                        "type": "string"
                                                    },
                                                    "ubicacion": {
                                                        "properties": {
                                                            "latitude": {
                                                                "type": "number"
                                                            },
                                                            "longitude": {
                                                                "type": "number"
                                                            }
                                                        },
                                                        "type": "object",
                                                        "nullable": true
                                                    },
                                                    "telefono": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "email": {
                                                        "type": "string",
                                                        "format": "email",
                                                        "nullable": true
                                                    },
                                                    "contacto_responsable": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "telefono_responsable": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "cadena": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "horario_atencion": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "delivery_24h": {
                                                        "type": "boolean"
                                                    },
                                                    "estado": {
                                                        "type": "string",
                                                        "enum": [
                                                            "activa",
                                                            "inactiva",
                                                            "suspendida"
                                                        ]
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "updated_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "$ref": "#/components/schemas/PaginationInfo"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Entities",
                    "Farmacias"
                ],
                "summary": "Crear farmacia",
                "description": "Crea una nueva farmacia en el sistema. Requiere información completa de la farmacia incluyendo datos de contacto y ubicación.",
                "operationId": "farmaciasStore",
                "requestBody": {
                    "description": "Datos de la farmacia a crear",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "nombre",
                                    "ruc_ein",
                                    "direccion_linea_1",
                                    "ciudad",
                                    "estado_region",
                                    "codigo_iso_pais"
                                ],
                                "properties": {
                                    "nombre": {
                                        "type": "string",
                                        "example": "Farmacia Central Lima"
                                    },
                                    "razon_social": {
                                        "type": "string",
                                        "example": "Farmacia Central S.A.",
                                        "nullable": true
                                    },
                                    "ruc_ein": {
                                        "type": "string",
                                        "example": "20123456789"
                                    },
                                    "direccion_linea_1": {
                                        "type": "string",
                                        "example": "Jr. Principal 123"
                                    },
                                    "direccion_linea_2": {
                                        "type": "string",
                                        "example": "Apto 4B",
                                        "nullable": true
                                    },
                                    "ciudad": {
                                        "type": "string",
                                        "example": "Lima"
                                    },
                                    "estado_region": {
                                        "type": "string",
                                        "example": "Lima"
                                    },
                                    "codigo_postal": {
                                        "type": "string",
                                        "example": "15001",
                                        "nullable": true
                                    },
                                    "codigo_iso_pais": {
                                        "type": "string",
                                        "example": "PE"
                                    },
                                    "ubicacion": {
                                        "properties": {
                                            "latitude": {
                                                "type": "number",
                                                "example": -12.0464
                                            },
                                            "longitude": {
                                                "type": "number",
                                                "example": -77.0428
                                            }
                                        },
                                        "type": "object",
                                        "nullable": true
                                    },
                                    "telefono": {
                                        "type": "string",
                                        "example": "+51123456789",
                                        "nullable": true
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "contacto@farmacia.pe",
                                        "nullable": true
                                    },
                                    "contacto_responsable": {
                                        "type": "string",
                                        "example": "Juan Pérez",
                                        "nullable": true
                                    },
                                    "telefono_responsable": {
                                        "type": "string",
                                        "example": "+51987654321",
                                        "nullable": true
                                    },
                                    "cadena": {
                                        "type": "string",
                                        "example": "Farmacia del Doctor",
                                        "nullable": true
                                    },
                                    "horario_atencion": {
                                        "type": "string",
                                        "example": "08:00 - 22:00",
                                        "nullable": true
                                    },
                                    "delivery_24h": {
                                        "type": "boolean",
                                        "example": false
                                    },
                                    "estado": {
                                        "type": "string",
                                        "enum": [
                                            "activa",
                                            "inactiva",
                                            "suspendida"
                                        ],
                                        "example": "activa"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Farmacia creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Farmacia creada exitosamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "nombre": {
                                                    "type": "string"
                                                },
                                                "ruc_ein": {
                                                    "type": "string"
                                                },
                                                "ciudad": {
                                                    "type": "string"
                                                },
                                                "estado": {
                                                    "type": "string"
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/farmacias/{farmacia}": {
            "get": {
                "tags": [
                    "Entities",
                    "Farmacias"
                ],
                "summary": "Obtener datos de farmacia",
                "description": "Obtiene la información completa de una farmacia específica por su UUID o RUC/EIN.",
                "operationId": "farmaciasShow",
                "parameters": [
                    {
                        "name": "farmacia",
                        "in": "path",
                        "description": "UUID o RUC/EIN de la farmacia",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Datos de la farmacia obtenidos exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando datos de la farmacia."
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "nombre": {
                                                    "type": "string"
                                                },
                                                "razon_social": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "ruc_ein": {
                                                    "type": "string"
                                                },
                                                "direccion_linea_1": {
                                                    "type": "string"
                                                },
                                                "direccion_linea_2": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "ciudad": {
                                                    "type": "string"
                                                },
                                                "estado_region": {
                                                    "type": "string"
                                                },
                                                "codigo_postal": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "codigo_iso_pais": {
                                                    "type": "string"
                                                },
                                                "ubicacion": {
                                                    "properties": {
                                                        "latitude": {
                                                            "type": "number"
                                                        },
                                                        "longitude": {
                                                            "type": "number"
                                                        }
                                                    },
                                                    "type": "object",
                                                    "nullable": true
                                                },
                                                "telefono": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "nullable": true
                                                },
                                                "contacto_responsable": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "telefono_responsable": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "cadena": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "horario_atencion": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "delivery_24h": {
                                                    "type": "boolean"
                                                },
                                                "estado": {
                                                    "type": "string",
                                                    "enum": [
                                                        "activa",
                                                        "inactiva",
                                                        "suspendida"
                                                    ]
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Farmacia no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Entities",
                    "Farmacias"
                ],
                "summary": "Eliminar farmacia",
                "description": "Elimina una farmacia del sistema. Esta operación es irreversible.",
                "operationId": "farmaciasDestroy",
                "parameters": [
                    {
                        "name": "farmacia",
                        "in": "path",
                        "description": "UUID de la farmacia",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Farmacia eliminada exitosamente"
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Farmacia no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Entities",
                    "Farmacias"
                ],
                "summary": "Actualizar farmacia",
                "description": "Actualiza la información de una farmacia. Soporta actualización parcial de campos.",
                "operationId": "farmaciasUpdate",
                "parameters": [
                    {
                        "name": "farmacia",
                        "in": "path",
                        "description": "UUID de la farmacia",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Campos a actualizar de la farmacia",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "nombre": {
                                        "type": "string",
                                        "example": "Farmacia Central Lima"
                                    },
                                    "razon_social": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "direccion_linea_1": {
                                        "type": "string"
                                    },
                                    "telefono": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "nullable": true
                                    },
                                    "delivery_24h": {
                                        "type": "boolean"
                                    },
                                    "estado": {
                                        "type": "string",
                                        "enum": [
                                            "activa",
                                            "inactiva",
                                            "suspendida"
                                        ]
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Farmacia actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Farmacia creada exitosamente."
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "No se recibió información para actualizar",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BadRequestResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Farmacia no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/farmacias/{farmacia}/users": {
            "get": {
                "tags": [
                    "Entities",
                    "Farmacias"
                ],
                "summary": "Listar usuarios de farmacia",
                "description": "Obtiene la lista de todos los usuarios que pertenecen a una farmacia específica.",
                "operationId": "farmaciasListUsers",
                "parameters": [
                    {
                        "name": "farmacia",
                        "in": "path",
                        "description": "UUID de la farmacia",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de usuarios de la farmacia obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando los usuarios que pertenecen a la farmacia."
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "email": {
                                                        "type": "string",
                                                        "format": "email"
                                                    },
                                                    "is_active": {
                                                        "type": "boolean"
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "updated_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Farmacia no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/farmacias/{farmacia}/estado": {
            "patch": {
                "tags": [
                    "Entities",
                    "Farmacias"
                ],
                "summary": "Actualizar estado de farmacia",
                "description": "Actualiza el estado operativo de una farmacia (activa, inactiva, suspendida).",
                "operationId": "farmaciasUpdateEstado",
                "parameters": [
                    {
                        "name": "farmacia",
                        "in": "path",
                        "description": "UUID de la farmacia",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Nuevo estado de la farmacia",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "estado"
                                ],
                                "properties": {
                                    "estado": {
                                        "type": "string",
                                        "enum": [
                                            "activa",
                                            "inactiva",
                                            "suspendida"
                                        ],
                                        "example": "inactiva"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Estado de la farmacia actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El estado de la farmacia ha sido actualizado"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Farmacia no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/google-api-usage/stats": {
            "get": {
                "tags": [
                    "Maps",
                    "Google APIs"
                ],
                "summary": "Obtener estadísticas de uso de Google APIs",
                "description": "Obtiene estadísticas detalladas de uso de servicios de Google APIs (Geocoding, Directions, Route Optimization) para un período específico. Incluye el costo estimado por servicio basado en la tarifa actual de Google.",
                "operationId": "googleApiUsageStats",
                "parameters": [
                    {
                        "name": "year",
                        "in": "query",
                        "description": "Año para filtrar estadísticas (2020-2030, por defecto año actual)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 2024
                        }
                    },
                    {
                        "name": "month",
                        "in": "query",
                        "description": "Mes para filtrar estadísticas (1-12, por defecto mes actual)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 11
                        }
                    },
                    {
                        "name": "service_type",
                        "in": "query",
                        "description": "Tipo de servicio para filtrar (route_optimization_fleetrouting, geocoding, directions)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "route_optimization_fleetrouting",
                                "geocoding",
                                "directions"
                            ],
                            "example": "geocoding"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Estadísticas obtenidas exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Estadísticas de uso de Google API"
                                        },
                                        "data": {
                                            "properties": {
                                                "period": {
                                                    "properties": {
                                                        "start_date": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2024-11-01T00:00:00.000000Z"
                                                        },
                                                        "end_date": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2024-11-30T23:59:59.000000Z"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "summary": {
                                                    "properties": {
                                                        "total_requests": {
                                                            "type": "integer",
                                                            "example": 1250
                                                        },
                                                        "total_estimated_cost": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 7.5
                                                        },
                                                        "currency": {
                                                            "type": "string",
                                                            "example": "USD"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "services": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "type": {
                                                                "type": "string",
                                                                "example": "geocoding"
                                                            },
                                                            "service_name": {
                                                                "type": "string",
                                                                "example": "Geocoding"
                                                            },
                                                            "total_requests": {
                                                                "type": "integer",
                                                                "example": 500
                                                            },
                                                            "cost_per_request": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "example": 0.005
                                                            },
                                                            "estimated_cost": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "example": 2.5
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación en los parámetros",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/reportes-pdf/etiquetas-pedido": {
            "post": {
                "tags": [
                    "Entities",
                    "ReportesPdf"
                ],
                "summary": "Generar PDF de etiquetas de pedidos",
                "description": "Crea un PDF con etiquetas de códigos de barras para los pedidos especificados. La generación es asincrónica y se notificará al usuario cuando esté listo para descargar.",
                "operationId": "reportesPdfEtiquetasPedido",
                "requestBody": {
                    "description": "Lista de UUIDs de pedidos",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "pedidos"
                                ],
                                "properties": {
                                    "pedidos": {
                                        "description": "Array de UUIDs de pedidos (mínimo 1, máximo 500)",
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "format": "uuid",
                                            "example": "550e8400-e29b-41d4-a716-446655440000"
                                        },
                                        "maxItems": 500,
                                        "minItems": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "202": {
                        "description": "Generación de PDF aceptada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "La creación del PDF de etiquetas ha sido iniciada. Recibirás una notificación cuando esté listo."
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "nombre": {
                                                    "type": "string"
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "en_proceso",
                                                        "creado",
                                                        "fallido",
                                                        "expirado"
                                                    ],
                                                    "example": "en_proceso"
                                                },
                                                "page_size": {
                                                    "type": "string",
                                                    "example": "A5"
                                                },
                                                "pedidos": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/reportes-pdf": {
            "get": {
                "tags": [
                    "Entities",
                    "ReportesPdf"
                ],
                "summary": "Listar reportes PDF",
                "description": "Obtiene una lista paginada de reportes PDF generados por el usuario actual o todos si es administrador.",
                "operationId": "reportesPdfIndex",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página (por defecto: 1)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Cantidad de registros por página (por defecto: 15)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "order_direction",
                        "in": "query",
                        "description": "Dirección de ordenamiento",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "desc"
                        }
                    },
                    {
                        "name": "fecha_desde",
                        "in": "query",
                        "description": "Filtrar por fecha de creación desde",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2024-01-01"
                        }
                    },
                    {
                        "name": "fecha_hasta",
                        "in": "query",
                        "description": "Filtrar por fecha de creación hasta",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2024-12-31"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de reportes PDF obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando los reportes pdf."
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "nombre": {
                                                        "type": "string"
                                                    },
                                                    "status": {
                                                        "type": "string",
                                                        "enum": [
                                                            "en_proceso",
                                                            "creado",
                                                            "fallido",
                                                            "expirado"
                                                        ]
                                                    },
                                                    "paginas": {
                                                        "type": "integer",
                                                        "nullable": true
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "updated_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "$ref": "#/components/schemas/PaginationInfo"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/reportes-pdf/{reportePdf}": {
            "get": {
                "tags": [
                    "Entities",
                    "ReportesPdf"
                ],
                "summary": "Obtener reporte PDF",
                "description": "Obtiene la información completa de un reporte PDF, incluyendo URL de descarga firmada y detalles del archivo.",
                "operationId": "reportesPdfShow",
                "parameters": [
                    {
                        "name": "reportePdf",
                        "in": "path",
                        "description": "UUID del reporte PDF",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalles del reporte PDF obtenidos exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando información del reporte"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "user_id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "nombre": {
                                                    "type": "string"
                                                },
                                                "file_url": {
                                                    "description": "URL de descarga firmada válida por 60 minutos",
                                                    "type": "string",
                                                    "format": "url",
                                                    "nullable": true
                                                },
                                                "file_size": {
                                                    "description": "Tamaño del archivo en bytes",
                                                    "type": "integer",
                                                    "nullable": true
                                                },
                                                "page_size": {
                                                    "type": "string",
                                                    "example": "A5"
                                                },
                                                "paginas": {
                                                    "type": "integer",
                                                    "nullable": true
                                                },
                                                "pedidos": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    }
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "en_proceso",
                                                        "creado",
                                                        "fallido",
                                                        "expirado"
                                                    ]
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Reporte PDF no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Entities",
                    "ReportesPdf"
                ],
                "summary": "Eliminar reporte PDF",
                "description": "Elimina un reporte PDF y su archivo asociado del almacenamiento.",
                "operationId": "reportesPdfDelete",
                "parameters": [
                    {
                        "name": "reportePdf",
                        "in": "path",
                        "description": "UUID del reporte PDF",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Reporte PDF eliminado exitosamente"
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Reporte PDF no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/reportes-pdf/antiguos": {
            "delete": {
                "tags": [
                    "Entities",
                    "ReportesPdf"
                ],
                "summary": "Eliminar reportes PDF antiguos",
                "description": "Inicia un trabajo asíncrono para eliminar automáticamente todos los reportes PDF cuya fecha de creación sea anterior a 30 días desde hoy.",
                "operationId": "reportesPdfDeleteAntiguos",
                "responses": {
                    "202": {
                        "description": "Proceso de eliminación iniciado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "La eliminación de reportes PDF antiguos ha sido iniciada."
                                        },
                                        "data": {
                                            "type": "null"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/reportes-pdf/{reportePdf}/regenerar": {
            "patch": {
                "tags": [
                    "Entities",
                    "ReportesPdf"
                ],
                "summary": "Regenerar reporte PDF",
                "description": "Elimina el archivo PDF actual y reinicia el proceso de generación. La URL de descarga estará disponible cuando el proceso asíncrono se complete.",
                "operationId": "reportesPdfRegenenar",
                "parameters": [
                    {
                        "name": "reportePdf",
                        "in": "path",
                        "description": "UUID del reporte PDF",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "202": {
                        "description": "Proceso de regeneración iniciado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "La regeneración del PDF ha sido iniciada. Recibirás una notificación cuando esté listo."
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "user_id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "nombre": {
                                                    "type": "string"
                                                },
                                                "file_url": {
                                                    "type": "string",
                                                    "format": "url",
                                                    "nullable": true
                                                },
                                                "file_size": {
                                                    "type": "integer",
                                                    "nullable": true
                                                },
                                                "page_size": {
                                                    "type": "string"
                                                },
                                                "paginas": {
                                                    "type": "integer",
                                                    "nullable": true
                                                },
                                                "pedidos": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    }
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "en_proceso",
                                                        "creado",
                                                        "fallido",
                                                        "expirado"
                                                    ]
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Reporte PDF no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/rutas": {
            "get": {
                "tags": [
                    "Entities",
                    "Rutas"
                ],
                "summary": "Listar rutas",
                "description": "Obtiene una lista paginada de rutas de entrega. Los repartidores solo pueden ver sus propias rutas.",
                "operationId": "rutasIndex",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página (por defecto: 1)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Cantidad de registros por página (por defecto: 15)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "order_by",
                        "in": "query",
                        "description": "Campo para ordenamiento",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "created_at",
                                "updated_at",
                                "nombre",
                                "distancia_total_estimada",
                                "tiempo_total_estimado",
                                "fecha_hora_calculo",
                                "fecha_inicio",
                                "fecha_completado"
                            ],
                            "example": "created_at"
                        }
                    },
                    {
                        "name": "order_direction",
                        "in": "query",
                        "description": "Dirección de ordenamiento",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "desc"
                        }
                    },
                    {
                        "name": "repartidor_id",
                        "in": "query",
                        "description": "Filtrar por UUID del repartidor (solo disponible para administradores)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    },
                    {
                        "name": "fecha_desde",
                        "in": "query",
                        "description": "Filtrar rutas creadas desde esta fecha",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2024-01-01"
                        }
                    },
                    {
                        "name": "fecha_hasta",
                        "in": "query",
                        "description": "Filtrar rutas creadas hasta esta fecha",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2024-12-31"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Buscar por nombre de la ruta",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Ruta Centro"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de rutas obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando lista de rutas."
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "nombre": {
                                                        "type": "string"
                                                    },
                                                    "distancia_total_estimada": {
                                                        "type": "number",
                                                        "format": "float"
                                                    },
                                                    "tiempo_total_estimado": {
                                                        "description": "En segundos",
                                                        "type": "integer"
                                                    },
                                                    "cantidad_pedidos": {
                                                        "type": "integer"
                                                    },
                                                    "fecha_hora_calculo": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "nullable": true
                                                    },
                                                    "fecha_inicio": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "nullable": true
                                                    },
                                                    "fecha_completado": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "nullable": true
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "updated_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "repartidor": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "string",
                                                                "format": "uuid"
                                                            },
                                                            "user": {
                                                                "properties": {
                                                                    "id": {
                                                                        "type": "string",
                                                                        "format": "uuid"
                                                                    },
                                                                    "name": {
                                                                        "type": "string"
                                                                    }
                                                                },
                                                                "type": "object"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "$ref": "#/components/schemas/PaginationInfo"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Entities",
                    "Rutas"
                ],
                "summary": "Crear ruta",
                "description": "Crea una nueva ruta de entrega para un repartidor específico.",
                "operationId": "rutasStore",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "repartidor_id"
                                ],
                                "properties": {
                                    "repartidor_id": {
                                        "description": "UUID del perfil del repartidor",
                                        "type": "string",
                                        "format": "uuid",
                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                    },
                                    "nombre": {
                                        "description": "Nombre descriptivo de la ruta",
                                        "type": "string",
                                        "example": "Ruta Centro",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Ruta creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ruta creada exitosamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "nombre": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "punto_inicio": {
                                                    "properties": {
                                                        "latitude": {
                                                            "type": "number",
                                                            "format": "float"
                                                        },
                                                        "longitude": {
                                                            "type": "number",
                                                            "format": "float"
                                                        }
                                                    },
                                                    "type": "object",
                                                    "nullable": true
                                                },
                                                "punto_final": {
                                                    "properties": {
                                                        "latitude": {
                                                            "type": "number",
                                                            "format": "float"
                                                        },
                                                        "longitude": {
                                                            "type": "number",
                                                            "format": "float"
                                                        }
                                                    },
                                                    "type": "object",
                                                    "nullable": true
                                                },
                                                "polyline_encoded": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "distancia_total_estimada": {
                                                    "type": "number",
                                                    "format": "float"
                                                },
                                                "tiempo_total_estimado": {
                                                    "type": "integer"
                                                },
                                                "cantidad_pedidos": {
                                                    "type": "integer"
                                                },
                                                "fecha_hora_calculo": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "nullable": true
                                                },
                                                "fecha_inicio": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "nullable": true
                                                },
                                                "fecha_completado": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "nullable": true
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "repartidor": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "string",
                                                            "format": "uuid"
                                                        },
                                                        "user": {
                                                            "properties": {
                                                                "id": {
                                                                    "type": "string",
                                                                    "format": "uuid"
                                                                },
                                                                "name": {
                                                                    "type": "string"
                                                                }
                                                            },
                                                            "type": "object"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Datos de validación inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/rutas/{ruta}": {
            "get": {
                "tags": [
                    "Entities",
                    "Rutas"
                ],
                "summary": "Obtener detalles de ruta",
                "description": "Obtiene los datos completos de una ruta, incluyendo la lista de pedidos asignados a ella.",
                "operationId": "rutasShow",
                "parameters": [
                    {
                        "name": "ruta",
                        "in": "path",
                        "description": "UUID de la ruta",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    },
                    {
                        "name": "order_by",
                        "in": "query",
                        "description": "Campo para ordenamiento de pedidos",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "tipo_pedido",
                                "estado",
                                "updated_at",
                                "orden_optimizado",
                                "orden_personalizado",
                                "orden_recojo"
                            ],
                            "example": "orden_personalizado"
                        }
                    },
                    {
                        "name": "order_direction",
                        "in": "query",
                        "description": "Dirección de ordenamiento",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "asc"
                        }
                    },
                    {
                        "name": "estado",
                        "in": "query",
                        "description": "Filtrar pedidos por estado",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pendiente",
                                "asignado",
                                "en_ruta",
                                "entregado",
                                "rechazado"
                            ]
                        }
                    },
                    {
                        "name": "optimizado",
                        "in": "query",
                        "description": "Filtrar por optimización (true/false)",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalles de la ruta obtenidos exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando datos y lista de pedidos de la ruta."
                                        },
                                        "data": {
                                            "properties": {
                                                "ruta": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "string",
                                                            "format": "uuid"
                                                        },
                                                        "nombre": {
                                                            "type": "string"
                                                        },
                                                        "punto_inicio": {
                                                            "properties": {
                                                                "latitude": {
                                                                    "type": "number",
                                                                    "format": "float"
                                                                },
                                                                "longitude": {
                                                                    "type": "number",
                                                                    "format": "float"
                                                                }
                                                            },
                                                            "type": "object"
                                                        },
                                                        "punto_final": {
                                                            "properties": {
                                                                "latitude": {
                                                                    "type": "number",
                                                                    "format": "float"
                                                                },
                                                                "longitude": {
                                                                    "type": "number",
                                                                    "format": "float"
                                                                }
                                                            },
                                                            "type": "object"
                                                        },
                                                        "polyline_encoded": {
                                                            "type": "string",
                                                            "nullable": true
                                                        },
                                                        "distancia_total_estimada": {
                                                            "type": "number",
                                                            "format": "float"
                                                        },
                                                        "tiempo_total_estimado": {
                                                            "type": "integer"
                                                        },
                                                        "cantidad_pedidos": {
                                                            "type": "integer"
                                                        },
                                                        "created_at": {
                                                            "type": "string",
                                                            "format": "date-time"
                                                        },
                                                        "updated_at": {
                                                            "type": "string",
                                                            "format": "date-time"
                                                        },
                                                        "repartidor": {
                                                            "properties": {
                                                                "id": {
                                                                    "type": "string",
                                                                    "format": "uuid"
                                                                },
                                                                "user": {
                                                                    "properties": {
                                                                        "id": {
                                                                            "type": "string",
                                                                            "format": "uuid"
                                                                        },
                                                                        "name": {
                                                                            "type": "string"
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                }
                                                            },
                                                            "type": "object"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "pedidos": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "string",
                                                                "format": "uuid"
                                                            },
                                                            "codigo_barra": {
                                                                "type": "string"
                                                            },
                                                            "ubicacion_recojo": {
                                                                "properties": {
                                                                    "latitude": {
                                                                        "type": "number",
                                                                        "format": "float"
                                                                    },
                                                                    "longitude": {
                                                                        "type": "number",
                                                                        "format": "float"
                                                                    }
                                                                },
                                                                "type": "object"
                                                            },
                                                            "ubicacion_entrega": {
                                                                "properties": {
                                                                    "latitude": {
                                                                        "type": "number",
                                                                        "format": "float"
                                                                    },
                                                                    "longitude": {
                                                                        "type": "number",
                                                                        "format": "float"
                                                                    }
                                                                },
                                                                "type": "object"
                                                            },
                                                            "direccion_entrega_linea_1": {
                                                                "type": "string"
                                                            },
                                                            "paciente_nombre": {
                                                                "type": "string"
                                                            },
                                                            "paciente_telefono": {
                                                                "type": "string"
                                                            },
                                                            "observaciones": {
                                                                "type": "string",
                                                                "nullable": true
                                                            },
                                                            "tipo_pedido": {
                                                                "type": "string"
                                                            },
                                                            "estado": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "pendiente",
                                                                    "asignado",
                                                                    "en_ruta",
                                                                    "entregado",
                                                                    "rechazado"
                                                                ]
                                                            },
                                                            "entregas": {
                                                                "properties": {
                                                                    "orden_optimizado": {
                                                                        "type": "integer",
                                                                        "nullable": true
                                                                    },
                                                                    "orden_personalizado": {
                                                                        "type": "integer"
                                                                    },
                                                                    "orden_recojo": {
                                                                        "type": "integer",
                                                                        "nullable": true
                                                                    },
                                                                    "optimizado": {
                                                                        "type": "boolean"
                                                                    }
                                                                },
                                                                "type": "object"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Acceso prohibido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ForbiddenResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Ruta no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Entities",
                    "Rutas"
                ],
                "summary": "Eliminar ruta",
                "description": "Elimina una ruta de entrega del sistema.",
                "operationId": "rutasDestroy",
                "parameters": [
                    {
                        "name": "ruta",
                        "in": "path",
                        "description": "UUID de la ruta",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Ruta eliminada exitosamente"
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Ruta no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Entities",
                    "Rutas"
                ],
                "summary": "Actualizar ruta",
                "description": "Actualiza los datos de una ruta existente. Si se cambia el repartidor, todos los pedidos sin asignar se reasignan al nuevo repartidor.",
                "operationId": "rutasUpdate",
                "parameters": [
                    {
                        "name": "ruta",
                        "in": "path",
                        "description": "UUID de la ruta",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "repartidor_id": {
                                        "description": "UUID del nuevo repartidor",
                                        "type": "string",
                                        "format": "uuid",
                                        "nullable": true
                                    },
                                    "nombre": {
                                        "type": "string",
                                        "example": "Ruta Centro Actualizada",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Ruta actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ruta actualizada exitosamente."
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Solicitud inválida",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BadRequestResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Ruta no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Datos de validación inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/rutas/current": {
            "get": {
                "tags": [
                    "Entities",
                    "Rutas"
                ],
                "summary": "Obtener ruta actual",
                "description": "Obtiene la ruta asignada actualmente al usuario repartidor autenticado con sus pedidos.",
                "operationId": "rutasCurrent",
                "parameters": [
                    {
                        "name": "order_by",
                        "in": "query",
                        "description": "Campo para ordenamiento de pedidos",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "tipo_pedido",
                                "estado",
                                "updated_at",
                                "orden_optimizado",
                                "orden_personalizado",
                                "orden_recojo"
                            ],
                            "example": "orden_personalizado"
                        }
                    },
                    {
                        "name": "order_direction",
                        "in": "query",
                        "description": "Dirección de ordenamiento",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "asc"
                        }
                    },
                    {
                        "name": "estado",
                        "in": "query",
                        "description": "Filtrar pedidos por estado",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pendiente",
                                "asignado",
                                "en_ruta",
                                "entregado",
                                "rechazado"
                            ]
                        }
                    },
                    {
                        "name": "optimizado",
                        "in": "query",
                        "description": "Filtrar por optimización",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Ruta actual obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando datos y lista de pedidos de la ruta."
                                        },
                                        "data": {
                                            "properties": {
                                                "ruta": {
                                                    "type": "object"
                                                },
                                                "pedidos": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Solo repartidores pueden acceder",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ForbiddenResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "El repartidor no tiene ruta asignada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/rutas/{ruta}/optimizar": {
            "patch": {
                "tags": [
                    "Entities",
                    "Rutas"
                ],
                "summary": "Optimizar ruta",
                "description": "Inicia un proceso asíncrono para optimizar la secuencia de entregas en una ruta específica basado en horarios de jornada.",
                "operationId": "rutasOptimizar",
                "parameters": [
                    {
                        "name": "ruta",
                        "in": "path",
                        "description": "UUID de la ruta",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "inicio_jornada",
                                    "fin_jornada"
                                ],
                                "properties": {
                                    "inicio_jornada": {
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2024-12-01T08:00:00"
                                    },
                                    "fin_jornada": {
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2024-12-01T18:00:00"
                                    },
                                    "ubicacion_actual": {
                                        "properties": {
                                            "latitude": {
                                                "type": "number",
                                                "format": "float"
                                            },
                                            "longitude": {
                                                "type": "number",
                                                "format": "float"
                                            }
                                        },
                                        "type": "object",
                                        "nullable": true
                                    },
                                    "ignorar_recojos": {
                                        "type": "boolean",
                                        "example": false,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "202": {
                        "description": "Proceso de optimización iniciado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Su solicitud está siendo procesada. Recibirás una notificación cuando los pedidos de la ruta hayan sido optimizados."
                                        },
                                        "data": {
                                            "type": "null"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Ruta no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Datos de validación inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/rutas/optimizar": {
            "post": {
                "tags": [
                    "Entities",
                    "Rutas"
                ],
                "summary": "Optimizar todas las rutas",
                "description": "Inicia un proceso asíncrono para crear y optimizar rutas para todos los pedidos pendientes de entrega en una región específica.",
                "operationId": "rutasOptimizarAll",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "codigo_iso_pais",
                                    "inicio_jornada",
                                    "fin_jornada"
                                ],
                                "properties": {
                                    "codigo_iso_pais": {
                                        "description": "Código ISO del país (PE, CO, BR, etc)",
                                        "type": "string",
                                        "example": "PE"
                                    },
                                    "inicio_jornada": {
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2024-12-01T08:00:00"
                                    },
                                    "fin_jornada": {
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2024-12-01T18:00:00"
                                    },
                                    "codigo_postal": {
                                        "description": "Código postal para filtrar por región",
                                        "type": "string",
                                        "example": "28001",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "202": {
                        "description": "Proceso de optimización iniciado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Su solicitud está siendo procesada. Recibirás una notificación cuando las rutas y pedidos hayan sido optimizados y asignados a los repartidores adecuados."
                                        },
                                        "data": {
                                            "type": "null"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Datos de validación inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/rutas/{ruta}/pedidos": {
            "get": {
                "tags": [
                    "Entities",
                    "Rutas"
                ],
                "summary": "Listar pedidos de ruta",
                "description": "Obtiene la lista de pedidos asignados a una ruta específica.",
                "operationId": "rutasPedidosList",
                "parameters": [
                    {
                        "name": "ruta",
                        "in": "path",
                        "description": "UUID de la ruta",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    },
                    {
                        "name": "order_by",
                        "in": "query",
                        "description": "Campo para ordenamiento",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "tipo_pedido",
                                "estado",
                                "updated_at",
                                "orden_optimizado",
                                "orden_personalizado",
                                "orden_recojo"
                            ],
                            "example": "orden_personalizado"
                        }
                    },
                    {
                        "name": "order_direction",
                        "in": "query",
                        "description": "Dirección de ordenamiento",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "asc"
                        }
                    },
                    {
                        "name": "estado",
                        "in": "query",
                        "description": "Filtrar por estado del pedido",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pendiente",
                                "asignado",
                                "en_ruta",
                                "entregado",
                                "rechazado"
                            ]
                        }
                    },
                    {
                        "name": "optimizado",
                        "in": "query",
                        "description": "Filtrar por optimización",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de pedidos obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando lista de pedidos de la ruta."
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Acceso prohibido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ForbiddenResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Ruta no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Entities",
                    "Rutas"
                ],
                "summary": "Agregar pedido a ruta",
                "description": "Agrega un pedido existente a una ruta. El pedido debe estar en estado pendiente o asignado.",
                "operationId": "rutasPedidosAdd",
                "parameters": [
                    {
                        "name": "ruta",
                        "in": "path",
                        "description": "UUID de la ruta",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "pedido_id"
                                ],
                                "properties": {
                                    "pedido_id": {
                                        "description": "UUID del pedido a agregar",
                                        "type": "string",
                                        "format": "uuid",
                                        "example": "550e8400-e29b-41d4-a716-446655440001"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Pedido agregado a la ruta exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El pedido ha sido agregado a la ruta."
                                        },
                                        "data": {
                                            "type": "null"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Ruta o pedido no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto (pedido ya asignado o estado inválido)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BadRequestResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Datos de validación inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/rutas/{ruta}/pedidos/{pedido}": {
            "delete": {
                "tags": [
                    "Entities",
                    "Rutas"
                ],
                "summary": "Remover pedido de ruta",
                "description": "Remueve un pedido específico de una ruta y recalcula el orden de entrega de los pedidos restantes.",
                "operationId": "rutasPedidosRemove",
                "parameters": [
                    {
                        "name": "ruta",
                        "in": "path",
                        "description": "UUID de la ruta",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    },
                    {
                        "name": "pedido",
                        "in": "path",
                        "description": "UUID del pedido",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440001"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pedido removido de la ruta exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El pedido ha sido removido de la ruta."
                                        },
                                        "data": {
                                            "type": "null"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Ruta o pedido no encontrado en la ruta",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/rutas/{ruta}/pedidos/reordenar": {
            "patch": {
                "tags": [
                    "Entities",
                    "Rutas"
                ],
                "summary": "Reordenar pedidos",
                "description": "Actualiza el orden personalizado de entrega de los pedidos en una ruta.",
                "operationId": "rutasPedidosReordenar",
                "parameters": [
                    {
                        "name": "ruta",
                        "in": "path",
                        "description": "UUID de la ruta",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "cambios"
                                ],
                                "properties": {
                                    "cambios": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "pedido_id",
                                                "orden_personalizado"
                                            ],
                                            "properties": {
                                                "pedido_id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "orden_personalizado": {
                                                    "type": "integer",
                                                    "minimum": 1
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "minItems": 1,
                                        "example": [
                                            {
                                                "pedido_id": "550e8400-e29b-41d4-a716-446655440001",
                                                "orden_personalizado": 2
                                            },
                                            {
                                                "pedido_id": "550e8400-e29b-41d4-a716-446655440002",
                                                "orden_personalizado": 1
                                            }
                                        ]
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Orden de pedidos actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El orden de la ruta ha sido actualizado exitosamente."
                                        },
                                        "data": {
                                            "type": "null"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Ruta no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Datos de validación inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/ubicaciones-repartidor": {
            "get": {
                "tags": [
                    "Entities",
                    "Ubicaciones Repartidor"
                ],
                "summary": "Listar ubicaciones de repartidores",
                "description": "Obtiene una lista de ubicaciones registradas de repartidores con soporte para paginación por cursor y filtros. Los administradores pueden ver ubicaciones de cualquier repartidor, mientras que los repartidores solo ven sus propias ubicaciones.",
                "operationId": "ubicacionesRepartidorIndex",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Número máximo de ubicaciones a retornar (1-500)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 100
                        }
                    },
                    {
                        "name": "cursor",
                        "in": "query",
                        "description": "Cursor codificado en base64 para la siguiente página de resultados",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "eyJmZWNoYV9yZWdpc3RybyI6IjIwMjQtMDItMDZUMDg6MzA6MzAuMDAwMDAwWiIsImlkIjoiNTUwZTg0MzMtZTI5Yi00MWQ0LWE3MTYtNDQ2NjU1NDQwMDAwIiwib3JkZXJfZGlyZWN0aW9uIjoiYXNjIiwib3JkZXJfYnkiOiJmZWNoYV9yZWdpc3RybyJ9"
                        }
                    },
                    {
                        "name": "order_direction",
                        "in": "query",
                        "description": "Dirección de ordenamiento",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "asc"
                        }
                    },
                    {
                        "name": "order_by",
                        "in": "query",
                        "description": "Campo por el cual ordenar",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "created_at",
                                "fecha_registro"
                            ],
                            "example": "fecha_registro"
                        }
                    },
                    {
                        "name": "start_ts",
                        "in": "query",
                        "description": "Fecha y hora de inicio para filtrar ubicaciones",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2024-02-06"
                        }
                    },
                    {
                        "name": "end_ts",
                        "in": "query",
                        "description": "Fecha y hora de fin para filtrar ubicaciones",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2024-02-08"
                        }
                    },
                    {
                        "name": "repartidor_id",
                        "in": "query",
                        "description": "UUID del repartidor para filtrar ubicaciones (requerido para administradores, se ignora para repartidores)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    },
                    {
                        "name": "pedido_id",
                        "in": "query",
                        "description": "UUID del pedido para filtrar ubicaciones",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440001"
                        }
                    },
                    {
                        "name": "ruta_id",
                        "in": "query",
                        "description": "UUID de la ruta para filtrar ubicaciones",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440002"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de ubicaciones obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando las ubicaciones de los repartidores"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "550e8400-e29b-41d4-a716-446655440003"
                                                    },
                                                    "repartidor_id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                                    },
                                                    "pedido_id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "550e8400-e29b-41d4-a716-446655440001",
                                                        "nullable": true
                                                    },
                                                    "ruta_id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "550e8400-e29b-41d4-a716-446655440002",
                                                        "nullable": true
                                                    },
                                                    "ubicacion": {
                                                        "properties": {
                                                            "latitude": {
                                                                "description": "Latitud",
                                                                "type": "number",
                                                                "example": 4.711
                                                            },
                                                            "longitude": {
                                                                "description": "Longitud",
                                                                "type": "number",
                                                                "example": -74.0087
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "precision_m": {
                                                        "description": "Precisión de la ubicación en metros",
                                                        "type": "number",
                                                        "example": 5.5,
                                                        "nullable": true
                                                    },
                                                    "velocidad_ms": {
                                                        "description": "Velocidad en metros por segundo",
                                                        "type": "number",
                                                        "example": 15.3,
                                                        "nullable": true
                                                    },
                                                    "direccion": {
                                                        "description": "Dirección en grados (0-360)",
                                                        "type": "number",
                                                        "example": 45.5,
                                                        "nullable": true
                                                    },
                                                    "fecha_registro": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2024-02-06T08:30:00.000000Z"
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2024-02-06T08:30:00.000000Z"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "cursor_pagination": {
                                            "properties": {
                                                "limit": {
                                                    "type": "integer",
                                                    "example": 100
                                                },
                                                "has_more": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "next_cursor": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "last_item": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "string",
                                                            "format": "uuid"
                                                        },
                                                        "key": {
                                                            "type": "string"
                                                        },
                                                        "value": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "type": "object",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Entities",
                    "Ubicaciones Repartidor"
                ],
                "summary": "Registrar ubicación de repartidor",
                "description": "Registra una nueva ubicación para un repartidor. Si se proporciona un pedido_id, valida que el repartidor esté asignado al pedido y que éste se encuentre en estado 'EN_RUTA'. La ubicación se registra como un punto GIS (latitud, longitud).",
                "operationId": "ubicacionesRepartidorStore",
                "requestBody": {
                    "description": "Datos de la ubicación a registrar",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "repartidor_id",
                                    "ubicacion"
                                ],
                                "properties": {
                                    "repartidor_id": {
                                        "description": "UUID del repartidor",
                                        "type": "string",
                                        "format": "uuid",
                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                    },
                                    "pedido_id": {
                                        "description": "UUID del pedido asociado (opcional)",
                                        "type": "string",
                                        "format": "uuid",
                                        "example": "550e8400-e29b-41d4-a716-446655440001",
                                        "nullable": true
                                    },
                                    "ubicacion": {
                                        "description": "Coordenadas del repartidor",
                                        "properties": {
                                            "latitude": {
                                                "description": "Latitud",
                                                "type": "number",
                                                "example": 4.711
                                            },
                                            "longitude": {
                                                "description": "Longitud",
                                                "type": "number",
                                                "example": -74.0087
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "precision_m": {
                                        "description": "Precisión de la ubicación en metros",
                                        "type": "number",
                                        "example": 5.5,
                                        "nullable": true
                                    },
                                    "velocidad_ms": {
                                        "description": "Velocidad en metros por segundo",
                                        "type": "number",
                                        "example": 15.3,
                                        "nullable": true
                                    },
                                    "direccion": {
                                        "description": "Dirección en grados (0-360)",
                                        "type": "number",
                                        "example": 45.5,
                                        "nullable": true
                                    },
                                    "fecha_registro": {
                                        "description": "Fecha y hora del registro (debe ser anterior o igual a ahora)",
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2024-02-06T08:30:00Z",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Ubicación registrada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ubicación del repartidor registrada exitosamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "550e8400-e29b-41d4-a716-446655440003"
                                                },
                                                "repartidor_id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "550e8400-e29b-41d4-a716-446655440000"
                                                },
                                                "pedido_id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "550e8400-e29b-41d4-a716-446655440001",
                                                    "nullable": true
                                                },
                                                "ruta_id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "550e8400-e29b-41d4-a716-446655440002",
                                                    "nullable": true
                                                },
                                                "ubicacion": {
                                                    "properties": {
                                                        "latitude": {
                                                            "description": "Latitud",
                                                            "type": "number",
                                                            "example": 4.711
                                                        },
                                                        "longitude": {
                                                            "description": "Longitud",
                                                            "type": "number",
                                                            "example": -74.0087
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "precision_m": {
                                                    "type": "number",
                                                    "example": 5.5,
                                                    "nullable": true
                                                },
                                                "velocidad_ms": {
                                                    "type": "number",
                                                    "example": 15.3,
                                                    "nullable": true
                                                },
                                                "direccion": {
                                                    "type": "number",
                                                    "example": 45.5,
                                                    "nullable": true
                                                },
                                                "fecha_registro": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2024-02-06T08:30:00.000000Z"
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2024-02-06T08:30:00.000000Z"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación o validación de negocio",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/fcm/tokens": {
            "post": {
                "tags": [
                    "FCM",
                    "Device Tokens"
                ],
                "summary": "Registrar o actualizar token FCM",
                "description": "Registra un nuevo token FCM para notificaciones push en el dispositivo actual. Si el token ya existe, actualiza la fecha de último uso. Útil para mantener múltiples dispositivos sincronizados.",
                "operationId": "fcmTokensStore",
                "requestBody": {
                    "description": "Token FCM del dispositivo",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "token"
                                ],
                                "properties": {
                                    "token": {
                                        "description": "Token FCM proporcionado por Firebase Cloud Messaging",
                                        "type": "string",
                                        "example": "eJZY5g7xR..."
                                    },
                                    "platform": {
                                        "description": "Plataforma del dispositivo (ios, android, web, etc)",
                                        "type": "string",
                                        "example": "ios",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Token FCM registrado o actualizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El token FCM ha sido registrado exitosamente."
                                        },
                                        "data": {
                                            "type": "null"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validación fallida - Token requerido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/fcm/tokens/{token}": {
            "delete": {
                "tags": [
                    "FCM",
                    "Device Tokens"
                ],
                "summary": "Eliminar un token FCM específico",
                "description": "Elimina un token FCM específico del usuario. El usuario dejaría de recibir notificaciones push en ese dispositivo.",
                "operationId": "fcmTokensDestroy",
                "parameters": [
                    {
                        "name": "token",
                        "in": "path",
                        "description": "Token FCM a eliminar",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "eJZY5g7xR..."
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Token eliminado o no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El token FCM ha sido eliminado exitosamente."
                                        },
                                        "data": {
                                            "type": "null"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/fcm/tokens/sesion/actual": {
            "delete": {
                "tags": [
                    "FCM",
                    "Device Tokens"
                ],
                "summary": "Eliminar tokens FCM de la sesión actual",
                "description": "Elimina todos los tokens FCM asociados a la sesión actual del usuario. Útil al cerrar sesión o en un dispositivo específico.",
                "operationId": "fcmTokensDestroyCurrentSessionTokens",
                "responses": {
                    "200": {
                        "description": "Tokens de la sesión eliminados",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Se eliminaron 2 tokens FCM asociados a la sesión actual."
                                        },
                                        "data": {
                                            "type": "null"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "No hay sesión activa",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BadRequestResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/notifications": {
            "get": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Listar notificaciones",
                "description": "Obtiene una lista paginada de notificaciones del usuario autenticado. Puede filtrar solo no leídas y por tipo de notificación.",
                "operationId": "notificationsIndex",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página (por defecto: 1)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Cantidad de elementos por página (por defecto: 15)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "order_by",
                        "in": "query",
                        "description": "Campo por el que ordenar (created_at, updated_at)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "created_at"
                        }
                    },
                    {
                        "name": "order_direction",
                        "in": "query",
                        "description": "Dirección del ordenamiento (asc, desc)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "desc"
                        }
                    },
                    {
                        "name": "unread_only",
                        "in": "query",
                        "description": "Mostrar solo notificaciones no leídas (true, false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "description": "Filtrar por tipo de notificación (ej: App\\Notifications\\PedidoCreado)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "App\\Notifications\\PedidoCreado"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de notificaciones obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Lista de notificaciones obtenida exitosamente"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                                                    },
                                                    "type": {
                                                        "type": "string",
                                                        "example": "App\\Notifications\\PedidoCreado"
                                                    },
                                                    "notifiable_id": {
                                                        "description": "ID del usuario que recibe la notificación",
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "data": {
                                                        "description": "Datos específicos de la notificación",
                                                        "type": "object"
                                                    },
                                                    "read_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": null,
                                                        "nullable": true
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-22T10:30:00Z"
                                                    },
                                                    "updated_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-22T10:30:00Z"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer",
                                                    "example": 125
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 15
                                                },
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "last_page": {
                                                    "type": "integer",
                                                    "example": 9
                                                },
                                                "from": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "to": {
                                                    "type": "integer",
                                                    "example": 15
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación en parámetros",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/notifications/{notificationId}": {
            "get": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Obtener detalles de una notificación",
                "description": "Retorna la información completa de una notificación específica. Solo el usuario puede ver sus propias notificaciones.",
                "operationId": "notificationsShow",
                "parameters": [
                    {
                        "name": "notificationId",
                        "in": "path",
                        "description": "UUID de la notificación",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notificación obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Notificación obtenida exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "type": {
                                                    "type": "string",
                                                    "example": "App\\Notifications\\PedidoCreado"
                                                },
                                                "notifiable_id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "data": {
                                                    "type": "object"
                                                },
                                                "read_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "nullable": true
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Notificación no encontrada o no pertenece al usuario",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Eliminar una notificación",
                "description": "Elimina una notificación específica del usuario. Solo puede eliminarse notificaciones propias.",
                "operationId": "notificationsDestroy",
                "parameters": [
                    {
                        "name": "notificationId",
                        "in": "path",
                        "description": "UUID de la notificación",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notificación eliminada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Notificación eliminada exitosamente"
                                        },
                                        "data": {
                                            "type": "null"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Notificación no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/notifications/{notificationId}/marcar-leida": {
            "patch": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Marcar notificación como leída",
                "description": "Marca una notificación específica como leída. Si ya estaba leída, no hace cambios.",
                "operationId": "notificationsMarkAsRead",
                "parameters": [
                    {
                        "name": "notificationId",
                        "in": "path",
                        "description": "UUID de la notificación",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notificación marcada como leída",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Notificación marcada como leída"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "type": {
                                                    "type": "string"
                                                },
                                                "read_at": {
                                                    "description": "Fecha/hora cuando se marcó como leída",
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Notificación no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/notifications/marcar-todas-leidas": {
            "patch": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Marcar todas las notificaciones como leídas",
                "description": "Marca todas las notificaciones no leídas del usuario como leídas de una sola vez.",
                "operationId": "notificationsMarkAllAsRead",
                "responses": {
                    "200": {
                        "description": "Todas las notificaciones marcadas como leídas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Se marcaron 5 notificaciones como leídas"
                                        },
                                        "data": {
                                            "properties": {
                                                "updated_count": {
                                                    "description": "Cantidad de notificaciones actualizadas",
                                                    "type": "integer",
                                                    "example": 5
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/notifications/unread/count": {
            "get": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Obtener cantidad de notificaciones no leídas",
                "description": "Retorna la cantidad de notificaciones no leídas del usuario autenticado.",
                "operationId": "notificationsGetUnreadCount",
                "responses": {
                    "200": {
                        "description": "Conteo obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Conteo de notificaciones no leídas obtenido"
                                        },
                                        "data": {
                                            "properties": {
                                                "unread_count": {
                                                    "type": "integer",
                                                    "example": 5
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/notifications/limpiar-leidas": {
            "delete": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Eliminar todas las notificaciones leídas",
                "description": "Elimina todas las notificaciones que ya fueron leídas. Útil para mantener limpia la bandeja.",
                "operationId": "notificationsClearRead",
                "responses": {
                    "200": {
                        "description": "Notificaciones leídas eliminadas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Se eliminaron 12 notificaciones leídas"
                                        },
                                        "data": {
                                            "properties": {
                                                "deleted_count": {
                                                    "description": "Cantidad de notificaciones eliminadas",
                                                    "type": "integer",
                                                    "example": 12
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/admins": {
            "get": {
                "tags": [
                    "User",
                    "PerfilAdministrador"
                ],
                "summary": "Listar usuarios administradores",
                "description": "Obtiene una lista paginada de usuarios administradores. Soporta filtrado por estado activo y búsqueda por nombre o email, con ordenamiento personalizable.",
                "operationId": "adminUsersIndex",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página (por defecto: 1)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Cantidad de elementos por página (por defecto: 15)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "order_by",
                        "in": "query",
                        "description": "Campo por el que ordenar (created_at, updated_at, name, email, is_active)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "created_at"
                        }
                    },
                    {
                        "name": "order_direction",
                        "in": "query",
                        "description": "Dirección del ordenamiento (asc, desc)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "desc"
                        }
                    },
                    {
                        "name": "is_active",
                        "in": "query",
                        "description": "Filtrar por estado activo (true, false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Búsqueda por nombre o email",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de administradores obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando todos los usuarios administradores."
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                                                    },
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Admin User"
                                                    },
                                                    "email": {
                                                        "type": "string",
                                                        "format": "email",
                                                        "example": "admin@example.com"
                                                    },
                                                    "avatar": {
                                                        "description": "URL firmada de la foto de perfil",
                                                        "type": "string",
                                                        "format": "url",
                                                        "example": "https://example.com/storage/signed-url",
                                                        "nullable": true
                                                    },
                                                    "is_active": {
                                                        "type": "boolean",
                                                        "example": true
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-22T10:30:00Z"
                                                    },
                                                    "updated_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-22T10:30:00Z"
                                                    },
                                                    "roles": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        },
                                                        "example": [
                                                            "administrador"
                                                        ]
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer",
                                                    "example": 42
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 15
                                                },
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "last_page": {
                                                    "type": "integer",
                                                    "example": 3
                                                },
                                                "from": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "to": {
                                                    "type": "integer",
                                                    "example": 15
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación en parámetros de paginación o filtrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "User",
                    "PerfilAdministrador"
                ],
                "summary": "Crear nuevo usuario administrador",
                "description": "Registra un nuevo usuario administrador en el sistema. Se genera automáticamente un token de acceso para inicio de sesión inmediato.",
                "operationId": "adminUsersRegister",
                "requestBody": {
                    "description": "Datos del nuevo administrador",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "email",
                                    "password",
                                    "password_confirmation",
                                    "device_name"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Nombre completo del administrador",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Juan García"
                                    },
                                    "email": {
                                        "description": "Email único del administrador",
                                        "type": "string",
                                        "format": "email",
                                        "maxLength": 255,
                                        "example": "juan@example.com"
                                    },
                                    "password": {
                                        "description": "Contraseña del administrador (mín 8 caracteres, debe incluir mayúscula, número y símbolo)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "SecurePass123!"
                                    },
                                    "password_confirmation": {
                                        "description": "Confirmación de la contraseña",
                                        "type": "string",
                                        "format": "password",
                                        "example": "SecurePass123!"
                                    },
                                    "device_name": {
                                        "description": "Nombre del dispositivo para identificar la sesión",
                                        "type": "string",
                                        "example": "Web - Chrome"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Administrador registrado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario registrado exitosamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "user": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "string",
                                                            "format": "uuid",
                                                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Juan García"
                                                        },
                                                        "email": {
                                                            "type": "string",
                                                            "format": "email",
                                                            "example": "juan@example.com"
                                                        },
                                                        "avatar": {
                                                            "type": "string",
                                                            "format": "url",
                                                            "example": null,
                                                            "nullable": true
                                                        },
                                                        "is_active": {
                                                            "type": "boolean",
                                                            "example": true
                                                        },
                                                        "created_at": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2025-11-22T10:30:00Z"
                                                        },
                                                        "updated_at": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2025-11-22T10:30:00Z"
                                                        },
                                                        "roles": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            },
                                                            "example": [
                                                                "administrador"
                                                            ]
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "access_token": {
                                                    "description": "Token de acceso Sanctum para sesión inmediata",
                                                    "type": "string",
                                                    "example": "1|abcd1234efgh5678ijkl9012mnop3456qrst7890uvwx"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Datos inválidos o email ya existe",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/admins/{userId}": {
            "get": {
                "tags": [
                    "User",
                    "PerfilAdministrador"
                ],
                "summary": "Obtener detalles de un administrador",
                "description": "Retorna la información completa de un usuario administrador específico, incluyendo sus roles.",
                "operationId": "adminUsersShow",
                "parameters": [
                    {
                        "name": "userId",
                        "in": "path",
                        "description": "UUID del administrador",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Información del administrador obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando datos del usuario administrador."
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "example": "Juan García"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "juan@example.com"
                                                },
                                                "avatar": {
                                                    "type": "string",
                                                    "format": "url",
                                                    "example": "https://example.com/storage/signed-url",
                                                    "nullable": true
                                                },
                                                "is_active": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-22T10:30:00Z"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-22T10:30:00Z"
                                                },
                                                "roles": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "example": [
                                                        "administrador"
                                                    ]
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario administrador no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "User",
                    "PerfilAdministrador"
                ],
                "summary": "Actualizar datos de un administrador",
                "description": "Actualiza la información de un usuario administrador. Los campos son opcionales; solo se actualizan los que se envían. Si se proporciona contraseña, debe incluirse la confirmación.",
                "operationId": "adminUsersUpdate",
                "parameters": [
                    {
                        "name": "userId",
                        "in": "path",
                        "description": "UUID del administrador",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Datos a actualizar del administrador",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "description": "Nombre completo (opcional)",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Juan Carlos García"
                                    },
                                    "email": {
                                        "description": "Email único (opcional)",
                                        "type": "string",
                                        "format": "email",
                                        "maxLength": 255,
                                        "example": "juan.garcia@example.com"
                                    },
                                    "password": {
                                        "description": "Nueva contraseña (opcional, requiere password_confirmation)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "NewSecurePass123!"
                                    },
                                    "password_confirmation": {
                                        "description": "Confirmación de nueva contraseña",
                                        "type": "string",
                                        "format": "password",
                                        "example": "NewSecurePass123!"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Administrador actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Los datos del usuario han sido actualizados."
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "example": "Juan Carlos García"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "juan.garcia@example.com"
                                                },
                                                "avatar": {
                                                    "type": "string",
                                                    "format": "url",
                                                    "example": "https://example.com/storage/signed-url",
                                                    "nullable": true
                                                },
                                                "is_active": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-22T10:30:00Z"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-22T15:45:00Z"
                                                },
                                                "roles": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "example": [
                                                        "administrador"
                                                    ]
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "No se recibió información para actualizar",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BadRequestResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario administrador no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Datos inválidos o email duplicado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "User",
                    "PerfilAdministrador"
                ],
                "summary": "Eliminar un usuario administrador",
                "description": "Elimina un usuario administrador del sistema. Se revoca automáticamente todos sus tokens activos. No permite eliminar el último administrador del sistema.",
                "operationId": "adminUsersDestroy",
                "parameters": [
                    {
                        "name": "userId",
                        "in": "path",
                        "description": "UUID del administrador a eliminar",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Administrador eliminado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El usuario administrador ha sido eliminado exitosamente."
                                        },
                                        "data": {
                                            "type": "null",
                                            "example": null
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario administrador no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "No se puede eliminar el último usuario administrador del sistema",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "error"
                                            ],
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No se puede eliminar el último usuario administrador del sistema."
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "string",
                                                    "example": "CONFLICT"
                                                },
                                                "errors": {
                                                    "type": "null"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/{userId}/activo": {
            "patch": {
                "tags": [
                    "User",
                    "PerfilBase"
                ],
                "summary": "Activar o desactivar usuario",
                "description": "Activa o desactiva un usuario. Los administradores no pueden desactivarse a sí mismos ni puede haber solo uno activo en el sistema.",
                "operationId": "userToggleActive",
                "parameters": [
                    {
                        "name": "userId",
                        "in": "path",
                        "description": "UUID del usuario",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Nuevo estado activo",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "is_active"
                                ],
                                "properties": {
                                    "is_active": {
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Estado actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El estado activo de la cuenta ha sido actualizado."
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "No se puede desactivar el último administrador activo",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BadRequestResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Valor inválido para is_active",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/{userId}/avatar": {
            "post": {
                "tags": [
                    "User",
                    "PerfilBase"
                ],
                "summary": "Subir o actualizar foto de perfil",
                "description": "Carga o actualiza la foto de perfil del usuario. Puede omitirse el archivo para eliminar la foto actual.",
                "operationId": "userUploadPicture",
                "parameters": [
                    {
                        "name": "userId",
                        "in": "path",
                        "description": "UUID del usuario",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Archivo de imagen",
                    "required": false,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "properties": {
                                    "avatar": {
                                        "description": "Imagen JPEG/PNG. Opcional - si se omite, elimina la foto actual",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Foto de perfil actualizada o eliminada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Foto de perfil actualizada correctamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "url": {
                                                    "description": "URL firmada para descargar la imagen",
                                                    "type": "string",
                                                    "format": "url",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Archivo inválido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error al procesar la imagen",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/farmacias": {
            "get": {
                "tags": [
                    "User",
                    "PerfilFarmacia"
                ],
                "summary": "Listar usuarios de farmacias",
                "description": "Obtiene una lista paginada de usuarios con rol de farmacia. Los usuarios farmacia solo pueden ver sus propios usuarios. Soporta búsqueda por nombre o email, y filtrado por estado activo.",
                "operationId": "farmaciaUsersIndex",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página (por defecto: 1)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Cantidad de elementos por página (por defecto: 15)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "order_by",
                        "in": "query",
                        "description": "Campo por el que ordenar (created_at, updated_at, name, email, is_active)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "created_at"
                        }
                    },
                    {
                        "name": "order_direction",
                        "in": "query",
                        "description": "Dirección del ordenamiento (asc, desc)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "desc"
                        }
                    },
                    {
                        "name": "is_active",
                        "in": "query",
                        "description": "Filtrar por estado activo (true, false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Búsqueda por nombre o email",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "farmacia"
                        }
                    },
                    {
                        "name": "farmacia_id",
                        "in": "query",
                        "description": "Filtrar por ID de farmacia (solo administradores)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de usuarios de farmacias obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando los usuarios de farmacias."
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                                                    },
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Gerente Farmacia"
                                                    },
                                                    "email": {
                                                        "type": "string",
                                                        "format": "email",
                                                        "example": "gerente@farmacia.com"
                                                    },
                                                    "avatar": {
                                                        "type": "string",
                                                        "format": "url",
                                                        "example": "https://example.com/storage/signed-url",
                                                        "nullable": true
                                                    },
                                                    "is_active": {
                                                        "type": "boolean",
                                                        "example": true
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-22T10:30:00Z"
                                                    },
                                                    "updated_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-22T10:30:00Z"
                                                    },
                                                    "roles": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        },
                                                        "example": [
                                                            "farmacia"
                                                        ]
                                                    },
                                                    "perfil_farmacia": {
                                                        "description": "Perfil de la farmacia del usuario",
                                                        "type": "object",
                                                        "nullable": true
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer",
                                                    "example": 25
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 15
                                                },
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "last_page": {
                                                    "type": "integer",
                                                    "example": 2
                                                },
                                                "from": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "to": {
                                                    "type": "integer",
                                                    "example": 15
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación en parámetros",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "User",
                    "PerfilFarmacia"
                ],
                "summary": "Crear nuevo usuario de farmacia",
                "description": "Registra un nuevo usuario con rol de farmacia en el sistema. Se genera automáticamente un token de acceso para sesión inmediata.",
                "operationId": "farmaciaUsersRegister",
                "requestBody": {
                    "description": "Datos del nuevo usuario de farmacia",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "email",
                                    "password",
                                    "password_confirmation",
                                    "device_name",
                                    "farmacia_id"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Nombre completo del usuario",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Gerente Farmacia"
                                    },
                                    "email": {
                                        "description": "Email único del usuario",
                                        "type": "string",
                                        "format": "email",
                                        "maxLength": 255,
                                        "example": "gerente@farmacia.com"
                                    },
                                    "password": {
                                        "description": "Contraseña (mín 8 caracteres, mayúscula, número y símbolo)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "SecurePass123!"
                                    },
                                    "password_confirmation": {
                                        "description": "Confirmación de contraseña",
                                        "type": "string",
                                        "format": "password",
                                        "example": "SecurePass123!"
                                    },
                                    "device_name": {
                                        "description": "Nombre del dispositivo para identificar sesión",
                                        "type": "string",
                                        "example": "Web - Chrome"
                                    },
                                    "farmacia_id": {
                                        "description": "ID de la farmacia asociada",
                                        "type": "string",
                                        "format": "uuid",
                                        "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Usuario de farmacia registrado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario farmacia registrado exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "user": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "string",
                                                            "format": "uuid",
                                                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Gerente Farmacia"
                                                        },
                                                        "email": {
                                                            "type": "string",
                                                            "format": "email",
                                                            "example": "gerente@farmacia.com"
                                                        },
                                                        "avatar": {
                                                            "type": "string",
                                                            "format": "url",
                                                            "example": null,
                                                            "nullable": true
                                                        },
                                                        "is_active": {
                                                            "type": "boolean",
                                                            "example": true
                                                        },
                                                        "created_at": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2025-11-22T10:30:00Z"
                                                        },
                                                        "updated_at": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2025-11-22T10:30:00Z"
                                                        },
                                                        "roles": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            },
                                                            "example": [
                                                                "farmacia"
                                                            ]
                                                        },
                                                        "perfil_farmacia": {
                                                            "description": "Perfil de la farmacia",
                                                            "type": "object",
                                                            "nullable": true
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "access_token": {
                                                    "description": "Token de acceso Sanctum",
                                                    "type": "string",
                                                    "example": "1|abcd1234efgh5678ijkl9012mnop3456qrst7890uvwx"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Datos inválidos o email duplicado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/farmacias/{perfilFarmaciaId}": {
            "get": {
                "tags": [
                    "User",
                    "PerfilFarmacia"
                ],
                "summary": "Obtener detalles de un usuario de farmacia",
                "description": "Retorna la información completa de un usuario de farmacia específico, incluyendo su perfil de farmacia.",
                "operationId": "farmaciaUsersShow",
                "parameters": [
                    {
                        "name": "perfilFarmaciaId",
                        "in": "path",
                        "description": "UUID del perfil de farmacia",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Información del usuario de farmacia obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando datos del usuario de farmacia."
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "example": "Gerente Farmacia"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "gerente@farmacia.com"
                                                },
                                                "avatar": {
                                                    "type": "string",
                                                    "format": "url",
                                                    "example": "https://example.com/storage/signed-url",
                                                    "nullable": true
                                                },
                                                "is_active": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-22T10:30:00Z"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-22T10:30:00Z"
                                                },
                                                "roles": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "example": [
                                                        "farmacia"
                                                    ]
                                                },
                                                "perfil_farmacia": {
                                                    "description": "Perfil de la farmacia",
                                                    "type": "object",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario de farmacia no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "User",
                    "PerfilFarmacia"
                ],
                "summary": "Actualizar datos de un usuario de farmacia",
                "description": "Actualiza la información de un usuario de farmacia. Los campos son opcionales; solo se actualizan los que se envían.",
                "operationId": "farmaciaUsersUpdate",
                "parameters": [
                    {
                        "name": "perfilFarmaciaId",
                        "in": "path",
                        "description": "UUID del perfil de farmacia",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Datos a actualizar del usuario",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "description": "Nombre completo (opcional)",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Gerente Farmacia Principal"
                                    },
                                    "email": {
                                        "description": "Email único (opcional)",
                                        "type": "string",
                                        "format": "email",
                                        "maxLength": 255,
                                        "example": "gerente.principal@farmacia.com"
                                    },
                                    "password": {
                                        "description": "Nueva contraseña (opcional, requiere confirmation)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "NewSecurePass123!"
                                    },
                                    "password_confirmation": {
                                        "description": "Confirmación de contraseña",
                                        "type": "string",
                                        "format": "password",
                                        "example": "NewSecurePass123!"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Usuario de farmacia actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Los datos del usuario han sido actualizados."
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "example": "Gerente Farmacia Principal"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "gerente.principal@farmacia.com"
                                                },
                                                "avatar": {
                                                    "type": "string",
                                                    "format": "url",
                                                    "example": "https://example.com/storage/signed-url",
                                                    "nullable": true
                                                },
                                                "is_active": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-22T10:30:00Z"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-22T15:45:00Z"
                                                },
                                                "roles": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "example": [
                                                        "farmacia"
                                                    ]
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "No se recibió información para actualizar",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BadRequestResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario de farmacia no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Datos inválidos o email duplicado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "User",
                    "PerfilFarmacia"
                ],
                "summary": "Eliminar un usuario de farmacia",
                "description": "Elimina un usuario de farmacia del sistema. Se revoca automáticamente todos sus tokens activos y se elimina su perfil de farmacia.",
                "operationId": "farmaciaUsersDestroy",
                "parameters": [
                    {
                        "name": "perfilFarmaciaId",
                        "in": "path",
                        "description": "UUID del perfil de farmacia",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usuario de farmacia eliminado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El usuario de farmacia ha sido eliminado exitosamente."
                                        },
                                        "data": {
                                            "type": "null",
                                            "example": null
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario de farmacia no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/repartidores": {
            "get": {
                "tags": [
                    "User",
                    "PerfilRepartidor"
                ],
                "summary": "Listar usuarios repartidores",
                "description": "Obtiene una lista paginada de usuarios repartidores. Soporta filtrado por estado activo, verificación, código país, rango de fechas y búsqueda por nombre/email.",
                "operationId": "repartidorUsersIndex",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página (por defecto: 1)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Cantidad de elementos por página (por defecto: 15)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "order_by",
                        "in": "query",
                        "description": "Campo por el que ordenar (created_at, updated_at, name, email, is_active)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "created_at"
                        }
                    },
                    {
                        "name": "order_direction",
                        "in": "query",
                        "description": "Dirección del ordenamiento (asc, desc)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "desc"
                        }
                    },
                    {
                        "name": "is_active",
                        "in": "query",
                        "description": "Filtrar por estado activo (true, false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Búsqueda por nombre o email",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "juan"
                        }
                    },
                    {
                        "name": "codigo_iso_pais",
                        "in": "query",
                        "description": "Filtrar por código ISO de país (puede ser múltiple)",
                        "required": false,
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "example": [
                                "CO",
                                "MX"
                            ]
                        }
                    },
                    {
                        "name": "estado",
                        "in": "query",
                        "description": "Filtrar por estado del repartidor",
                        "required": false,
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "enum": [
                                    "activo",
                                    "inactivo",
                                    "suspendido"
                                ]
                            }
                        }
                    },
                    {
                        "name": "verificado",
                        "in": "query",
                        "description": "Filtrar por estado de verificación (true, false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "fecha_desde",
                        "in": "query",
                        "description": "Filtrar por fecha de creación desde",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2025-01-01"
                        }
                    },
                    {
                        "name": "fecha_hasta",
                        "in": "query",
                        "description": "Filtrar por fecha de creación hasta",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2025-12-31"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de repartidores obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando todos los usuarios repartidores."
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                                                    },
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Juan García"
                                                    },
                                                    "email": {
                                                        "type": "string",
                                                        "format": "email",
                                                        "example": "juan@example.com"
                                                    },
                                                    "avatar": {
                                                        "type": "string",
                                                        "format": "url",
                                                        "example": "https://example.com/storage/signed-url",
                                                        "nullable": true
                                                    },
                                                    "is_active": {
                                                        "type": "boolean",
                                                        "example": true
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-22T10:30:00Z"
                                                    },
                                                    "updated_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-22T10:30:00Z"
                                                    },
                                                    "roles": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        },
                                                        "example": [
                                                            "repartidor"
                                                        ]
                                                    },
                                                    "perfil_repartidor": {
                                                        "description": "Perfil del repartidor con documentos y vehículo",
                                                        "type": "object",
                                                        "nullable": true
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer",
                                                    "example": 150
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 15
                                                },
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "last_page": {
                                                    "type": "integer",
                                                    "example": 10
                                                },
                                                "from": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "to": {
                                                    "type": "integer",
                                                    "example": 15
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación en parámetros",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "User",
                    "PerfilRepartidor"
                ],
                "summary": "Crear nuevo usuario repartidor",
                "description": "Registra un nuevo usuario repartidor en el sistema con información básica y datos del perfil. Se genera un token de acceso para sesión inmediata.",
                "operationId": "repartidorUsersRegister",
                "requestBody": {
                    "description": "Datos del nuevo repartidor",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "email",
                                    "password",
                                    "password_confirmation",
                                    "device_name",
                                    "codigo_iso_pais",
                                    "telefono"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Nombre completo",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Juan García López"
                                    },
                                    "email": {
                                        "description": "Email único",
                                        "type": "string",
                                        "format": "email",
                                        "maxLength": 255,
                                        "example": "juan@example.com"
                                    },
                                    "password": {
                                        "description": "Contraseña",
                                        "type": "string",
                                        "format": "password",
                                        "example": "SecurePass123!"
                                    },
                                    "password_confirmation": {
                                        "description": "Confirmación",
                                        "type": "string",
                                        "format": "password",
                                        "example": "SecurePass123!"
                                    },
                                    "device_name": {
                                        "description": "Nombre del dispositivo",
                                        "type": "string",
                                        "example": "iPhone 15"
                                    },
                                    "codigo_iso_pais": {
                                        "description": "Código ISO del país",
                                        "type": "string",
                                        "example": "CO"
                                    },
                                    "telefono": {
                                        "description": "Número de teléfono",
                                        "type": "string",
                                        "example": "+573001234567"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Repartidor registrado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ],
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario repartidor registrado exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "user": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "string",
                                                            "format": "uuid"
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Juan García López"
                                                        },
                                                        "email": {
                                                            "type": "string",
                                                            "format": "email",
                                                            "example": "juan@example.com"
                                                        },
                                                        "roles": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            },
                                                            "example": [
                                                                "repartidor"
                                                            ]
                                                        },
                                                        "perfil_repartidor": {
                                                            "description": "Perfil del repartidor",
                                                            "type": "object"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "access_token": {
                                                    "description": "Token de acceso",
                                                    "type": "string",
                                                    "example": "1|abcd..."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/repartidores/{perfilRepartidorId}": {
            "get": {
                "tags": [
                    "User",
                    "PerfilRepartidor"
                ],
                "summary": "Obtener detalles de un repartidor",
                "description": "Retorna la información completa de un repartidor incluyendo documentos verificables.",
                "operationId": "repartidorUsersShow",
                "parameters": [
                    {
                        "name": "perfilRepartidorId",
                        "in": "path",
                        "description": "UUID del perfil de repartidor",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Información del repartidor obtenida",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ]
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mostrando datos del usuario repartidor."
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Repartidor no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "User",
                    "PerfilRepartidor"
                ],
                "summary": "Actualizar datos de un repartidor",
                "description": "Actualiza información del usuario y/o perfil del repartidor. Se puede actualizar datos básicos o específicos del perfil repartidor.",
                "operationId": "repartidorUsersUpdate",
                "parameters": [
                    {
                        "name": "perfilRepartidorId",
                        "in": "path",
                        "description": "UUID del perfil de repartidor",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Datos a actualizar",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "description": "Nombre (opcional)",
                                        "type": "string"
                                    },
                                    "email": {
                                        "description": "Email (opcional)",
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "description": "Contraseña (opcional)",
                                        "type": "string",
                                        "format": "password"
                                    },
                                    "password_confirmation": {
                                        "description": "Confirmación",
                                        "type": "string",
                                        "format": "password"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Repartidor actualizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ]
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Los datos del usuario han sido actualizados."
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "No se recibió información para actualizar",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BadRequestResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Repartidor no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "User",
                    "PerfilRepartidor"
                ],
                "summary": "Eliminar un repartidor",
                "description": "Elimina un repartidor del sistema. Se revoca automáticamente todos sus tokens y se elimina su perfil.",
                "operationId": "repartidorUsersDestroy",
                "parameters": [
                    {
                        "name": "perfilRepartidorId",
                        "in": "path",
                        "description": "UUID del perfil de repartidor",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Repartidor eliminado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ]
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El usuario repartidor ha sido eliminado exitosamente."
                                        },
                                        "data": {
                                            "type": "null"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Repartidor no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotFoundResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/repartidores/{perfilRepartidorId}/estado": {
            "patch": {
                "tags": [
                    "User",
                    "PerfilRepartidor"
                ],
                "summary": "Actualizar estado del repartidor",
                "description": "Actualiza el estado operacional del repartidor (activo, inactivo, suspendido).",
                "operationId": "repartidorUsersUpdateEstado",
                "parameters": [
                    {
                        "name": "perfilRepartidorId",
                        "in": "path",
                        "description": "UUID del perfil de repartidor",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Nuevo estado",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "estado"
                                ],
                                "properties": {
                                    "estado": {
                                        "type": "string",
                                        "enum": [
                                            "activo",
                                            "inactivo",
                                            "suspendido"
                                        ],
                                        "example": "activo"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Estado actualizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ]
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El estado del repartidor ha sido actualizado"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Estado inválido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/repartidores/{perfilRepartidorId}/verificado": {
            "patch": {
                "tags": [
                    "User",
                    "PerfilRepartidor"
                ],
                "summary": "Actualizar estado de verificación",
                "description": "Marca un repartidor como verificado o no verificado después de validar sus documentos.",
                "operationId": "repartidorUsersUpdateVerificado",
                "parameters": [
                    {
                        "name": "perfilRepartidorId",
                        "in": "path",
                        "description": "UUID del perfil de repartidor",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Estado de verificación",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "verificado"
                                ],
                                "properties": {
                                    "verificado": {
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Verificación actualizada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ]
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El estado verificado del repartidor ha sido actualizado."
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Valor inválido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/repartidores/{perfilRepartidorId}/documentos/dni": {
            "post": {
                "tags": [
                    "User",
                    "PerfilRepartidor"
                ],
                "summary": "Subir foto de documento de identidad",
                "description": "Carga la foto del documento de identidad del repartidor. Reemplaza la anterior si existe.",
                "operationId": "repartidorUploadFotoDni",
                "parameters": [
                    {
                        "name": "perfilRepartidorId",
                        "in": "path",
                        "description": "UUID del perfil de repartidor",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Archivo de imagen",
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "foto_dni_id"
                                ],
                                "properties": {
                                    "foto_dni_id": {
                                        "description": "Imagen JPEG/PNG del documento",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Documento subido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ]
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "La foto de su documento de identidad ha sido actualizada correctamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "url": {
                                                    "description": "URL firmada para descargar la imagen",
                                                    "type": "string",
                                                    "format": "url"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Archivo inválido o no enviado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error al guardar el archivo",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/repartidores/{perfilRepartidorId}/documentos/licencia": {
            "post": {
                "tags": [
                    "User",
                    "PerfilRepartidor"
                ],
                "summary": "Subir foto de licencia de conducir",
                "description": "Carga la foto de la licencia de conducir del repartidor. Reemplaza la anterior si existe.",
                "operationId": "repartidorUploadFotoLicencia",
                "parameters": [
                    {
                        "name": "perfilRepartidorId",
                        "in": "path",
                        "description": "UUID del perfil de repartidor",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Archivo de imagen",
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "foto_licencia"
                                ],
                                "properties": {
                                    "foto_licencia": {
                                        "description": "Imagen JPEG/PNG de la licencia",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Licencia subida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ]
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "La foto de su licencia de conducir ha sido actualizada correctamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "url": {
                                                    "type": "string",
                                                    "format": "url"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Archivo inválido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error al guardar",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/users/repartidores/{perfilRepartidorId}/documentos/seguro": {
            "post": {
                "tags": [
                    "User",
                    "PerfilRepartidor"
                ],
                "summary": "Subir foto de seguro del vehículo",
                "description": "Carga la foto del seguro del vehículo del repartidor. Reemplaza la anterior si existe.",
                "operationId": "repartidorUploadFotoSeguroVehiculo",
                "parameters": [
                    {
                        "name": "perfilRepartidorId",
                        "in": "path",
                        "description": "UUID del perfil de repartidor",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Archivo de imagen",
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "foto_seguro_vehiculo"
                                ],
                                "properties": {
                                    "foto_seguro_vehiculo": {
                                        "description": "Imagen JPEG/PNG del seguro",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Seguro subido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "success"
                                            ]
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "La foto del seguro de su vehículo ha sido actualizada correctamente."
                                        },
                                        "data": {
                                            "properties": {
                                                "url": {
                                                    "type": "string",
                                                    "format": "url"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UnauthorizedResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Archivo inválido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error al guardar",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServerErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "Error": {
                "description": "Estructura base de error en la respuesta",
                "properties": {
                    "code": {
                        "description": "Código de error único",
                        "type": "string",
                        "example": "VALIDATION_ERROR"
                    },
                    "errors": {
                        "description": "Mapa de errores por campo (opcional)",
                        "type": "object",
                        "example": {
                            "email": [
                                "Las credenciales proporcionadas son incorrectas."
                            ]
                        },
                        "nullable": true,
                        "additionalProperties": true
                    }
                },
                "type": "object"
            },
            "BadRequestResponse": {
                "description": "Respuesta 400 - Solicitud malformada",
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "fail"
                        ],
                        "example": "fail"
                    },
                    "message": {
                        "type": "string",
                        "example": "La solicitud no pudo ser procesada debido a una sintaxis inválida o datos incorrectos."
                    },
                    "error": {
                        "$ref": "#/components/schemas/Error"
                    }
                },
                "type": "object"
            },
            "UnauthorizedResponse": {
                "description": "Respuesta 401 - No autenticado",
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "fail"
                        ],
                        "example": "fail"
                    },
                    "message": {
                        "type": "string",
                        "example": "No autenticado. Por favor, inicie sesión."
                    },
                    "error": {
                        "properties": {
                            "code": {
                                "type": "string",
                                "enum": [
                                    "UNAUTHORIZED"
                                ],
                                "example": "UNAUTHORIZED"
                            },
                            "errors": {
                                "type": "null"
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "ForbiddenResponse": {
                "description": "Respuesta 403 - Acceso prohibido/No tiene permiso",
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "fail"
                        ],
                        "example": "fail"
                    },
                    "message": {
                        "type": "string",
                        "example": "No tiene permiso para realizar esta acción."
                    },
                    "error": {
                        "properties": {
                            "code": {
                                "type": "string",
                                "enum": [
                                    "FORBIDDEN"
                                ],
                                "example": "FORBIDDEN"
                            },
                            "errors": {
                                "type": "null"
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "NotFoundResponse": {
                "description": "Respuesta 404 - Recurso no encontrado",
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "fail"
                        ],
                        "example": "fail"
                    },
                    "message": {
                        "type": "string",
                        "example": "El recurso solicitado no fue encontrado."
                    },
                    "error": {
                        "properties": {
                            "code": {
                                "type": "string",
                                "enum": [
                                    "NOT_FOUND"
                                ],
                                "example": "NOT_FOUND"
                            },
                            "errors": {
                                "type": "null"
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "ValidationErrorResponse": {
                "description": "Respuesta 422 - Error de validación en los datos",
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "fail"
                        ],
                        "example": "fail"
                    },
                    "message": {
                        "type": "string",
                        "example": "Los datos proporcionados no son válidos."
                    },
                    "error": {
                        "properties": {
                            "code": {
                                "type": "string",
                                "enum": [
                                    "VALIDATION_ERROR"
                                ],
                                "example": "VALIDATION_ERROR"
                            },
                            "errors": {
                                "description": "Errores de validación por campo",
                                "type": "object",
                                "example": {
                                    "email": [
                                        "Email es requerido"
                                    ],
                                    "password": [
                                        "Password debe tener al menos 8 caracteres"
                                    ]
                                },
                                "additionalProperties": true
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "MethodNotAllowedResponse": {
                "description": "Respuesta 405 - Método HTTP no permitido",
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "fail"
                        ],
                        "example": "fail"
                    },
                    "message": {
                        "type": "string",
                        "example": "Método HTTP no permitido para esta ruta."
                    },
                    "error": {
                        "properties": {
                            "code": {
                                "type": "string",
                                "enum": [
                                    "METHOD_NOT_ALLOWED"
                                ],
                                "example": "METHOD_NOT_ALLOWED"
                            },
                            "errors": {
                                "type": "null"
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "InvalidSignatureResponse": {
                "description": "Respuesta 403 - Enlace de descarga inválido o expirado",
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "fail"
                        ],
                        "example": "fail"
                    },
                    "message": {
                        "type": "string",
                        "example": "El enlace de descarga es inválido o ha expirado. Por favor, solicite uno nuevo."
                    },
                    "error": {
                        "properties": {
                            "code": {
                                "type": "string",
                                "enum": [
                                    "INVALID_SIGNED_URL"
                                ],
                                "example": "INVALID_SIGNED_URL"
                            },
                            "errors": {
                                "type": "null"
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "ServerErrorResponse": {
                "description": "Respuesta 500 - Error interno del servidor",
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "error"
                        ],
                        "example": "error"
                    },
                    "message": {
                        "type": "string",
                        "example": "Error interno del servidor."
                    },
                    "error": {
                        "properties": {
                            "code": {
                                "type": "string",
                                "enum": [
                                    "SERVER_ERROR"
                                ],
                                "example": "SERVER_ERROR"
                            },
                            "errors": {
                                "type": "null"
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "SuccessResponse": {
                "description": "Estructura genérica de respuesta exitosa",
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "success"
                        ],
                        "example": "success"
                    },
                    "message": {
                        "type": "string",
                        "example": "Operación completada exitosamente."
                    },
                    "data": {
                        "description": "Datos de la respuesta",
                        "type": "object",
                        "nullable": true
                    },
                    "pagination": {
                        "description": "Información de paginación",
                        "type": "object",
                        "nullable": true
                    },
                    "cursor_pagination": {
                        "description": "Información de paginación por cursor",
                        "type": "object",
                        "nullable": true
                    },
                    "metadata": {
                        "description": "Metadatos adicionales",
                        "type": "object",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PaginationInfo": {
                "description": "Información de paginación",
                "properties": {
                    "total": {
                        "type": "integer",
                        "example": 100
                    },
                    "count": {
                        "type": "integer",
                        "example": 10
                    },
                    "per_page": {
                        "type": "integer",
                        "example": 10
                    },
                    "current_page": {
                        "type": "integer",
                        "example": 1
                    },
                    "total_pages": {
                        "type": "integer",
                        "example": 10
                    },
                    "links": {
                        "properties": {
                            "first": {
                                "type": "string",
                                "format": "url",
                                "nullable": true
                            },
                            "last": {
                                "type": "string",
                                "format": "url",
                                "nullable": true
                            },
                            "next": {
                                "type": "string",
                                "format": "url",
                                "nullable": true
                            },
                            "prev": {
                                "type": "string",
                                "format": "url",
                                "nullable": true
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "CursorPaginationInfo": {
                "description": "Información de paginación por cursor",
                "properties": {
                    "next_cursor": {
                        "type": "string",
                        "nullable": true
                    },
                    "prev_cursor": {
                        "type": "string",
                        "nullable": true
                    },
                    "path": {
                        "type": "string",
                        "format": "url"
                    },
                    "per_page": {
                        "type": "integer"
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "sanctum": {
                "type": "http",
                "description": "Token de acceso Sanctum. Se obtiene en el endpoint de login.",
                "name": "Token based based auth",
                "in": "header",
                "bearerFormat": "Sanctum",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Auth",
            "description": "Endpoints de autenticación y gestión de sesiones"
        },
        {
            "name": "PerfilBase",
            "description": "Endpoints para usuarios base"
        },
        {
            "name": "PerfilAdministrador",
            "description": "Endpoints para administradores del sistema"
        },
        {
            "name": "PerfilFarmacia",
            "description": "Endpoints para usuarios de farmacias"
        },
        {
            "name": "PerfilRepartidor",
            "description": "Endpoints para usuarios repartidores"
        },
        {
            "name": "Pedidos",
            "description": "Endpoints para gestión de pedidos"
        },
        {
            "name": "Eventos",
            "description": "Endpoints para gestión de eventos de pedidos"
        },
        {
            "name": "Farmacias",
            "description": "Endpoints para gestión de farmacias"
        },
        {
            "name": "Rutas",
            "description": "Endpoints para gestión de rutas de entrega"
        },
        {
            "name": "Entities",
            "description": "Endpoints para gestión de entidades relacionadas"
        },
        {
            "name": "ReportesPdf",
            "description": "Endpoints para generación de reportes PDF"
        },
        {
            "name": "Maps",
            "description": "Endpoints para servicios de mapas y geolocalización"
        },
        {
            "name": "Notifications",
            "description": "Endpoints para gestión de notificaciones"
        },
        {
            "name": "FCM",
            "description": "Endpoints para gestión de tokens FCM (Firebase Cloud Messaging)"
        },
        {
            "name": "Downloads",
            "description": "Endpoints para descargas de archivos"
        },
        {
            "name": "Directions",
            "description": "Directions"
        },
        {
            "name": "Geocoding",
            "description": "Geocoding"
        },
        {
            "name": "Google APIs",
            "description": "Google APIs"
        },
        {
            "name": "Ubicaciones Repartidor",
            "description": "Ubicaciones Repartidor"
        },
        {
            "name": "Device Tokens",
            "description": "Device Tokens"
        },
        {
            "name": "User",
            "description": "User"
        }
    ]
}